



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">


<link rel="alternate" type="application/rss+xml" title="" href="https://monkeyhh.top/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="" href="https://monkeyhh.top/atom.xml" />
<link rel="alternate" type="application/json" title="" href="https://monkeyhh.top/feed.json" />

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="/css/app.css?v=0.2.5">

  
  <meta name="keywords" content="React" />


<link rel="canonical" href="https://monkeyhh.top/FrontEnd/React/FrontEnd/React/%E3%80%90React%E5%9F%BA%E7%A1%80%E3%80%91React%20Hooks%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8">



  <title>
ã€ReactåŸºç¡€ã€‘React Hooksä»‹ç»ä¸ä½¿ç”¨ - React - FrontEnd |
Monkey's Blog = </title>
<meta name="generator" content="Hexo 5.4.0"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">ã€ReactåŸºç¡€ã€‘React Hooksä»‹ç»ä¸ä½¿ç”¨
  </h1>
  
<div class="meta">
  <span class="item" title="Created: 2021-08-01 12:00:32">
    <span class="icon">
      <i class="ic i-calendar"></i>
    </span>
    <span class="text">Posted on</span>
    <time itemprop="dateCreated datePublished" datetime="2021-08-01T12:00:32+08:00">2021-08-01</time>
  </span>
  <span class="item" title="Symbols count in article">
    <span class="icon">
      <i class="ic i-pen"></i>
    </span>
    <span class="text">Symbols count in article</span>
    <span>24k</span>
    <span class="text">words</span>
  </span>
  <span class="item" title="Reading time">
    <span class="icon">
      <i class="ic i-clock"></i>
    </span>
    <span class="text">Reading time</span>
    <span>22 mins.</span>
  </span>
</div>


          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="Toggle navigation bar">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">Monkey's Blog</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
          <img src="https://gitee.com/monkey-HH/picBed/raw/master/picbed/img/202112281415928.png">
      </div>
    </header>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="article wrap">
    
<div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
<i class="ic i-home"></i>
<span><a href="/">Home</a></span><i class="ic i-angle-right"></i>
<span  itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/FrontEnd/" itemprop="item" rel="index" title="In FrontEnd"><span itemprop="name">FrontEnd</span></a>
<meta itemprop="position" content="1" /></span>
<i class="ic i-angle-right"></i>
<span  class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/FrontEnd/React/" itemprop="item" rel="index" title="In React"><span itemprop="name">React</span></a>
<meta itemprop="position" content="2" /></span>
</div>

    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="en">
  <link itemprop="mainEntityOfPage" href="https://monkeyhh.top/FrontEnd/React/FrontEnd/React/%E3%80%90React%E5%9F%BA%E7%A1%80%E3%80%91React%20Hooks%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8">

  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="/images/avatar.jpg">
    <meta itemprop="name" content="Monkey-HH">
    <meta itemprop="description" content=", Learn, share, make progress">
  </span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <h1 id="ä»€ä¹ˆæ˜¯React-Hooksï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯React-Hooksï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯React Hooksï¼Ÿ"></a>ä»€ä¹ˆæ˜¯React Hooksï¼Ÿ</h1><p><em>Hook</em> æ˜¯ React 16.8 çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™â€œç±»ç»„ä»¶â€çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§ã€‚</p>
<p>ä»¥å‰è¿˜åœ¨çƒ¦æ¼Functionç»„ä»¶æ²¡æœ‰çŠ¶æ€ï¼Œç°åœ¨æœ‰äº†Hooksï¼Œå°±å¯ä»¥æŠ›å¼ƒClassç»„ä»¶äº†ã€‚</p>
<h1 id="ä¸ºä»€ä¹ˆè¦æœ‰React-Hooksï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦æœ‰React-Hooksï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦æœ‰React Hooksï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦æœ‰React Hooksï¼Ÿ</h1><p>ä»¥ä¸‹å†…å®¹å®˜æ–¹æœ‰ç›¸å…³çš„<span class="exturl" data-url="aHR0cHM6Ly96aC1oYW5zLnJlYWN0anMub3JnL2RvY3MvaG9va3MtaW50cm8uaHRtbCNtb3RpdmF0aW9u">è®ºè¿°</span>ã€‚</p>
<h2 id="å¤ç”¨ä¸€ä¸ªâ€œæœ‰çŠ¶æ€ç»„ä»¶â€å›°éš¾"><a href="#å¤ç”¨ä¸€ä¸ªâ€œæœ‰çŠ¶æ€ç»„ä»¶â€å›°éš¾" class="headerlink" title="å¤ç”¨ä¸€ä¸ªâ€œæœ‰çŠ¶æ€ç»„ä»¶â€å›°éš¾"></a>å¤ç”¨ä¸€ä¸ªâ€œæœ‰çŠ¶æ€ç»„ä»¶â€å›°éš¾</h2><p>Reactæ²¡æœ‰æä¾›å°†å¯å¤ç”¨æ€§è¡Œä¸ºâ€œé™„åŠ â€åˆ°ç»„ä»¶çš„é€”å¾„ï¼ˆä¾‹å¦‚ï¼ŒæŠŠç»„ä»¶è¿æ¥åˆ° storeï¼‰ã€‚å¦‚æœä½ ä½¿ç”¨è¿‡ React ä¸€æ®µæ—¶é—´ï¼Œä½ ä¹Ÿè®¸ä¼šç†Ÿæ‚‰ä¸€äº›è§£å†³æ­¤ç±»é—®é¢˜çš„æ–¹æ¡ˆï¼Œæ¯”å¦‚mixinã€ <span class="exturl" data-url="aHR0cHM6Ly96aC1oYW5zLnJlYWN0anMub3JnL2RvY3MvaGlnaGVyLW9yZGVyLWNvbXBvbmVudHMuaHRtbA==">HOCï¼ˆé«˜é˜¶ç»„ä»¶ï¼‰</span>å’Œ <span class="exturl" data-url="aHR0cHM6Ly96aC1oYW5zLnJlYWN0anMub3JnL2RvY3MvcmVuZGVyLXByb3BzLmh0bWw=">Render Props</span> ã€‚æˆ‘ä»¬å…ˆæ¥ä»‹ç»ä¸€ä¸‹è¿™å‡ ç§æ¨¡å¼ï¼š</p>
<h3 id="Mixin"><a href="#Mixin" class="headerlink" title="Mixin"></a>Mixin</h3><blockquote>
<p>Mixinï¼šæ··å…¥</p>
</blockquote>
<p>è¿™æ˜¯ä¸€ç§å¤è€çš„çŠ¶æ€å¤ç”¨æ–¹æ¡ˆï¼Œå·²ç»è¢«æ·˜æ±°äº†ã€‚</p>
<p><code>React</code>ä½œè€…Danåœ¨å®˜æ–¹å‘è¡¨<span class="exturl" data-url="aHR0cHM6Ly9yZWFjdGpzLm9yZy9ibG9nLzIwMTYvMDcvMTMvbWl4aW5zLWNvbnNpZGVyZWQtaGFybWZ1bC5odG1s">Mixins Considered Harmful</span>ä¸€æ–‡ä¸­æåˆ°äº†<code>Mixin</code>å¸¦æ¥äº†å±å®³ï¼š</p>
<ul>
<li><strong>ES6 class</strong>ã€‚å…¶ä¸æ”¯æŒ mixinsã€‚</li>
<li><code>Mixin</code> å¯èƒ½ä¼šç›¸äº’ä¾èµ–ï¼Œç›¸äº’è€¦åˆï¼Œä¸åˆ©äºä»£ç ç»´æŠ¤</li>
<li><strong>åå­—å†²çª</strong>ã€‚ä¸¤ä¸ªè¦æ›´æ–°åŒä¸€æ®µ state çš„ mixins å¯èƒ½ä¼šç›¸äº’è¦†ç›–ã€‚<code>createClass</code> API ä¼šå¯¹ä¸¤ä¸ª mixins çš„ <code>getInitialState</code> æ˜¯å¦å…·æœ‰ç›¸åŒçš„ key åšæ£€æŸ¥ï¼Œå¦‚æœå…·æœ‰ï¼Œåˆ™ä¼šå‘å‡ºè­¦å‘Šï¼Œä½†è¯¥æ‰‹æ®µå¹¶ä¸ç‰¢é ã€‚</li>
<li><strong>ä¸å¤Ÿç›´æ¥</strong>ã€‚minxins æ”¹å˜äº† stateï¼Œå› æ­¤ä¹Ÿå°±å¾ˆéš¾çŸ¥é“ä¸€äº› state æ˜¯ä»å“ªé‡Œæ¥çš„ï¼Œå°¤å…¶æ˜¯å½“ä¸æ­¢å­˜åœ¨ä¸€ä¸ª mixins æ—¶ã€‚</li>
</ul>
<p><code>React</code>ç°åœ¨å·²ç»ä¸å†æ¨èä½¿ç”¨<code>Mixin</code>æ¥è§£å†³ä»£ç å¤ç”¨é—®é¢˜ï¼Œå› ä¸º<code>Mixin</code>å¸¦æ¥çš„å±å®³æ¯”ä»–äº§ç”Ÿçš„ä»·å€¼è¿˜è¦å·¨å¤§ï¼Œå¹¶ä¸”<code>React</code>å…¨é¢æ¨èä½¿ç”¨é«˜é˜¶ç»„ä»¶æ¥æ›¿ä»£å®ƒã€‚å¦å¤–ï¼Œé«˜é˜¶ç»„ä»¶è¿˜èƒ½å®ç°æ›´å¤šå…¶ä»–æ›´å¼ºå¤§çš„åŠŸèƒ½ã€‚</p>
<p>æ€»è€Œè¨€ä¹‹ï¼šmixinsä¹‹æ‰€ä»¥è¢«å¦å®šï¼Œæ˜¯å› ä¸º<strong>Mixinsæœºåˆ¶æ˜¯è®©å¤šä¸ªMixinså…±äº«ä¸€ä¸ªå¯¹è±¡çš„æ•°æ®ç©ºé—´ï¼Œè¿™æ ·å°±å¾ˆéš¾ç¡®ä¿ä¸åŒMixinsä¾èµ–çš„çŠ¶æ€ä¸å‘ç”Ÿå†²çª</strong>ã€‚</p>
<h3 id="HOC"><a href="#HOC" class="headerlink" title="HOC"></a>HOC</h3><blockquote>
<p><strong><span class="exturl" data-url="aHR0cHM6Ly96aC1oYW5zLnJlYWN0anMub3JnL2RvY3MvaGlnaGVyLW9yZGVyLWNvbXBvbmVudHMuaHRtbCNnYXRzYnktZm9jdXMtd3JhcHBlcg==">é«˜é˜¶ç»„ä»¶</span>ï¼ˆ<span class="exturl" data-url="aHR0cHM6Ly9yZWFjdGpzLm9yZy9kb2NzL2hpZ2hlci1vcmRlci1jb21wb25lbnRzLmh0bWw=">HOC</span>ï¼‰ï¼š</strong>è¯´ç™½äº†å°±æ˜¯ä¸€ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œéšåè¿”å›ä¸€ä¸ªæ–°ç»„ä»¶ã€‚</p>
</blockquote>
<p>HOCæ˜¯è£…é¥°å™¨æ¨¡å¼çš„ä¸€ç§åº”ç”¨ï¼Œè¿™æ˜¯ä¸€ç§ç”¨äºç”Ÿæˆå¯é‡ç”¨ç»„ä»¶çš„å¼ºå¤§æŠ€æœ¯ã€‚</p>
<p>åšæ³•å°±æ˜¯ç»™ä¸€ä¸ªå‡½æ•°ä¼ å…¥ä¸€ä¸ªç»„ä»¶ï¼Œåœ¨å‡½æ•°å†…å¯¹è¯¥ç»„ä»¶è¿›è¡Œ<strong>å¢å¼º</strong>ï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶ã€‚</p>
<p> Redux <code>connect</code>æ˜¯é«˜é˜¶ç»„ä»¶çš„ç¤ºä¾‹ã€‚ <code>React.memo()</code>ä¹Ÿæ˜¯åˆ©ç”¨äº†HOCã€‚</p>
<p>å¦‚ä¸‹æ–¹ä»£ç ï¼Œ<code>withUser</code>æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œè¿”å›äº†ä¸€ä¸ªæ–°çš„ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶å…·æœ‰äº†å®ƒæä¾›çš„è·å–ç”¨æˆ·ä¿¡æ¯çš„åŠŸèƒ½ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> withUser = <span class="function"><span class="params">WrappedComponent</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> user = sessionStorage.getItem(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="params">props</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> <span class="attr">user</span>=<span class="string">&#123;user&#125;</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> UserPage = <span class="function"><span class="params">props</span> =&gt;</span> (</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;user-container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>My name is &#123;props.user&#125;!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> withUser(UserPage);</span><br></pre></td></tr></table></figure>



<p>HOCçš„ä¼˜ç¼ºç‚¹âˆ¶</p>
<ul>
<li>ä¼˜ç‚¹âˆ¶ å†™èµ·æ¥å…¶å®æŒºç›´è§‚çš„ï¼Œé€»è¾‘æœç”¨ã€ä¸å½±å“è¢«åŒ…è£¹ç»„ä»¶çš„å†…éƒ¨é€»è¾‘ã€‚</li>
<li>ç¼ºç‚¹âˆ¶ HOCä¼ é€’ç»™è¢«åŒ…è£¹ç»„ä»¶çš„propså®¹æ˜“å’Œè¢«åŒ…è£¹åçš„ç»„ä»¶é‡åï¼Œè¿›è€Œè¢«è¦†ç›–ã€‚è¦å†™ä¸€äº›æ ·æ¿ä»£ç ï¼Œä¾‹å¦‚è¦é€šè¿‡<code>&#123;...props&#125;</code>å»æ¥å—propsç­‰ç­‰ï¼Œæœ‰äº›è®¸éº»çƒ¦ã€‚</li>
</ul>
<h3 id="Render-Props"><a href="#Render-Props" class="headerlink" title="Render Props"></a>Render Props</h3><blockquote>
<p><strong>â­Render Propsï¼ˆæ¸²æŸ“å±æ€§ï¼‰ï¼š</strong>ç»™ä¸€ä¸ªå­ç»„ä»¶ä¼ å…¥ä¸€ä¸ªpropï¼Œè¯¥<strong>propä¸ºä¸€ä¸ªå‡½æ•°ï¼ˆè¾“å…¥dataï¼Œè¿”å›æ–°ç»„ä»¶ï¼‰</strong>ï¼Œæœ€ç»ˆæ•ˆæœå°±æ˜¯å­ç»„ä»¶æä¾›æ•°æ®ï¼Œpropå†³å®šæ¸²æŸ“æ–¹å¼ã€‚</p>
</blockquote>
<p>Render Propså¯ä»¥åšåˆ°HOCèƒ½åšåˆ°çš„ä¸€åˆ‡äº‹æƒ…ï¼Œåè¿‡æ¥å´ä¸è¡Œã€‚</p>
<p>Render Propså’ŒHOCçš„<strong>åŒºåˆ«</strong>å¦‚ä¸‹ï¼š</p>
<ul>
<li>HOC é«˜é˜¶ç»„ä»¶çš„æ§åˆ¶æƒåœ¨äº Wrapper ç»„ä»¶ï¼Œå³åŒ…è£¹çš„ç»„ä»¶ï¼Œæœ€å<strong>æ¸²æŸ“ç»“æœç”±çˆ¶ç»„ä»¶å†³å®š</strong>ã€‚</li>
<li>Render Props åˆ™æ˜¯æ§åˆ¶åè½¬ï¼ˆIOCï¼‰ï¼Œæ§åˆ¶æƒåœ¨å­ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶ä¸è¿‡æ˜¯æä¾›äº†ä¸€äº›æ•°æ®ï¼Œä½†<strong>æ¸²æŸ“ç»“æœä»ç„¶ç”±å­ç»„ä»¶å†³å®š</strong>ã€‚</li>
</ul>
<p>Render Propsæœ€å¤§çš„<strong>ç¼ºç‚¹</strong>ï¼šæ— æ³•åœ¨ return è¯­å¥å¤–è®¿é—®æ•°æ®ã€åµŒå¥—å†™æ³•ä¸å¤Ÿä¼˜é›…ï¼ˆçœ‹èµ·æ¥å¾ˆåƒåµŒå¥—åœ°ç‹±ï¼‰ã€‚</p>
<p>å¦‚ä¸‹é¢çš„ä»£ç æ‰€ç¤ºï¼š</p>
<ul>
<li>Mouseç»„ä»¶ï¼šç›¸å½“äºä¸Šé¢çš„ç»„ä»¶Aï¼Œæ¥å—ä¸€ä¸ªrender propï¼Œå¹¶è¾“å…¥è‡ªå·±çš„æ•°æ®ã€‚</li>
<li>Catç»„ä»¶ï¼šæ¥å—Mouseç»„ä»¶æä¾›çš„æ•°æ®ï¼Œå¹¶æ¸²æŸ“è§†å›¾ã€‚</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DataProviderï¼šå­ç»„ä»¶</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DataProvider</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Components</span> </span>&#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;Tom&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>å…±äº«æ•°æ®ç»„ä»¶è‡ªå·±å†…éƒ¨çš„æ¸²æŸ“é€»è¾‘<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">                &#123; this.props.render(this.state) &#125;</span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Fatherï¼šçˆ¶ç»„ä»¶</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ç§»åŠ¨é¼ æ ‡!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">DataProvider</span> <span class="attr">render</span>=<span class="string">&#123;data</span> =&gt;</span> (</span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;data.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    )&#125;/&gt;</span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>è™½ç„¶è¿™ä¸ªæ¨¡å¼å«Render Propsï¼Œä½†ä¸æ˜¯è¯´éç”¨ä¸€ä¸ªå«renderçš„propsä¸å¯ï¼Œä¹ æƒ¯ä¸Šå¤§å®¶æ›´å¸¸å†™æˆä¸‹é¢è¿™ç§ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">&lt;DataProvider&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="params">data</span> =&gt;</span> (<span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;data.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>)</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/DataProvider&gt;</span><br></pre></td></tr></table></figure>



<p>ä½†æ˜¯è¿™ç±»æ–¹æ¡ˆéœ€è¦é‡æ–°ç»„ç»‡ä½ çš„ç»„ä»¶ç»“æ„ï¼Œè¿™å¯èƒ½ä¼šå¾ˆéº»çƒ¦ï¼Œä½¿ä½ çš„ä»£ç éš¾ä»¥ç†è§£ã€‚å¦‚æœä½ åœ¨ React DevTools ä¸­è§‚å¯Ÿè¿‡ React åº”ç”¨ï¼Œä½ ä¼šå‘ç°ç”± providersï¼Œconsumersï¼Œé«˜é˜¶ç»„ä»¶ï¼Œrender props ç­‰å…¶ä»–æŠ½è±¡å±‚ç»„æˆçš„ç»„ä»¶ä¼šå½¢æˆâ€œåµŒå¥—åœ°ç‹±â€ã€‚å°½ç®¡æˆ‘ä»¬å¯ä»¥<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0LWRldnRvb2xzL3B1bGwvNTAz">åœ¨ DevTools è¿‡æ»¤æ‰å®ƒä»¬</span>ï¼Œä½†è¿™è¯´æ˜äº†ä¸€ä¸ªæ›´æ·±å±‚æ¬¡çš„é—®é¢˜ï¼šReact éœ€è¦ä¸ºå…±äº«çŠ¶æ€é€»è¾‘æä¾›æ›´å¥½çš„åŸç”Ÿé€”å¾„ã€‚</p>
<p>ä½ å¯ä»¥ä½¿ç”¨ Hook ä»ç»„ä»¶ä¸­æå–çŠ¶æ€é€»è¾‘ï¼Œä½¿å¾—è¿™äº›é€»è¾‘å¯ä»¥å•ç‹¬æµ‹è¯•å¹¶å¤ç”¨ã€‚<strong>Hook ä½¿ä½ åœ¨æ— éœ€ä¿®æ”¹ç»„ä»¶ç»“æ„çš„æƒ…å†µä¸‹å¤ç”¨çŠ¶æ€é€»è¾‘ã€‚</strong> è¿™ä½¿å¾—åœ¨ç»„ä»¶é—´æˆ–ç¤¾åŒºå†…å…±äº« Hook å˜å¾—æ›´ä¾¿æ·ã€‚</p>
<h2 id="å¤æ‚ç»„ä»¶å˜å¾—éš¾ä»¥ç†è§£"><a href="#å¤æ‚ç»„ä»¶å˜å¾—éš¾ä»¥ç†è§£" class="headerlink" title="å¤æ‚ç»„ä»¶å˜å¾—éš¾ä»¥ç†è§£"></a>å¤æ‚ç»„ä»¶å˜å¾—éš¾ä»¥ç†è§£</h2><p>æˆ‘ä»¬é€šå¸¸å¸Œæœ›ä¸€ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹æƒ…ï¼Œä½†æˆ‘ä»¬çš„ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°é‡Œé€šå¸¸åŒæ—¶åšäº†å¾ˆå¤šäº‹æƒ…ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬éœ€è¦åœ¨<code>componentDidMount</code>ä¸­å‘èµ·ajaxè¯·æ±‚è·å–æ•°æ®ï¼Œç»‘å®šä¸€äº›äº‹ä»¶ç›‘å¬ç­‰ç­‰ã€‚åŒæ—¶ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬è¿˜éœ€è¦åœ¨<code>componentDidUpdate</code><u>åšä¸€éåŒæ ·çš„äº‹æƒ…</u>ã€‚å½“é¡¹ç›®å˜å¤æ‚åï¼Œè¿™ä¸€å—çš„ä»£ç ä¹Ÿå˜å¾—ä¸é‚£ä¹ˆç›´è§‚ã€‚è€Œä¹‹åéœ€åœ¨ <code>componentWillUnmount</code> ä¸­æ¸…é™¤ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FriendStatus</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> ... &#125;</span><br><span class="line">    <span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.subscribeToStore(<span class="built_in">this</span>.props.friend.id)</span><br><span class="line">        <span class="built_in">this</span>.fetchFriendStatus(<span class="built_in">this</span>.props.friend.id)</span><br><span class="line">        <span class="built_in">this</span>.startTimers()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">componentWillUnmount</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.unsubscribeFromStore(<span class="built_in">this</span>.props.friend.id)</span><br><span class="line">        <span class="built_in">this</span>.cancelPendingRequests()</span><br><span class="line">        <span class="built_in">this</span>.stopTimers()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">componentDidUpdate</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å­ä¼šæœ‰ä»€ä¹ˆåå¤„ï¼Ÿ</p>
<ul>
<li>ç›¸åŒçš„é€»è¾‘é‡å¤ä¹¦å†™ï¼Œæ˜æ˜æ˜¯<u>ç›¸äº’å…³è”ä¸”éœ€è¦å¯¹ç…§ä¿®æ”¹çš„ä»£ç </u>è¦åˆ†å¼€åˆ°å¤šä¸ªå‡½æ•°é‡Œé‡å¤ä¹¦å†™ã€‚</li>
<li>å®Œå…¨ä¸ç›¸å…³çš„ä»£ç å´è¦å†™åœ¨ä¸€èµ·ã€‚</li>
</ul>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ<strong>Hook å°†ç»„ä»¶ä¸­ç›¸äº’å…³è”çš„éƒ¨åˆ†æ‹†åˆ†æˆæ›´å°çš„å‡½æ•°</strong>ï¼ˆæ¯”å¦‚è®¾ç½®è®¢é˜…æˆ–è¯·æ±‚æ•°æ®ï¼‰ï¼Œè€Œ<strong>å¹¶éå¼ºåˆ¶æŒ‰ç…§ç”Ÿå‘½å‘¨æœŸåˆ’åˆ†</strong>ã€‚ä½ è¿˜å¯ä»¥ä½¿ç”¨ reducer æ¥ç®¡ç†ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€ï¼Œä½¿å…¶æ›´åŠ å¯é¢„æµ‹ã€‚</p>
<h2 id="éš¾ä»¥ç†è§£çš„class"><a href="#éš¾ä»¥ç†è§£çš„class" class="headerlink" title="éš¾ä»¥ç†è§£çš„class"></a>éš¾ä»¥ç†è§£çš„class</h2><p>åœ¨Hookså‡ºç°ä¹‹å‰ï¼Œç”±äºå‡½æ•°ç»„ä»¶æ— æ³•ä½¿ç”¨Stateï¼Œå› æ­¤æˆ‘ä»¬å¸¸ç”¨çš„æ˜¯classç»„ä»¶ã€‚ä½†æ˜¯classç»„ä»¶æœ‰ä¸€ä¸ªå¾ˆéº»çƒ¦çš„äº‹æƒ…ï¼Œå°±æ˜¯thisçš„æŒ‡å‘é—®é¢˜ã€‚<strong>åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­çš„thisæ— æ³•æ­£ç¡®æŒ‡å‘</strong>ã€‚å¯¹æ­¤ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„ä¸¤ç§æ–¹å¼ï¼š</p>
<ol>
<li><code>this.handleClick = this.handleClick.bind(this)</code></li>
<li><code>&lt;button onClick=&#123;() =&gt; this.handleClick(e)&#125;&gt;</code></li>
</ol>
<p>ä¸€æ—¦æˆ‘ä»¬ä¸å°å¿ƒå¿˜äº†ç»‘å®šthisï¼Œå„ç§bugå°±éšä¹‹è€Œæ¥ï¼Œå¾ˆéº»çƒ¦ã€‚è¿˜æœ‰ä¸€ä»¶å¾ˆéº»çƒ¦çš„äº‹æƒ…ï¼Œå¦‚æœæˆ‘ä»¬å†™äº†ä¸€ä¸ªæ— çŠ¶æ€çš„ç»„ä»¶ï¼Œå³å‡½æ•°ç»„ä»¶ï¼Œæœ€åˆä¹‹æ„ä¸ºå®ƒä¼šæ–¹ä¾¿å¤ç”¨ï¼Œä¸”ä¸éœ€è¦æœ‰è‡ªå·±çš„stateï¼Œå†™æˆå‡½æ•°ç»„ä»¶å¤šæ–¹ä¾¿ã€‚ä½†æ˜¯æœ‰ä¸€å¤©ï¼Œéœ€æ±‚å˜åŠ¨äº†ï¼Œæˆ‘ä»¬éœ€è¦è¿™ä¸ªç»„ä»¶æœ‰è‡ªå·±çš„stateï¼Œé‚£å°±æ˜¯åˆå¾—æ”¹ä¸ºclassç»„ä»¶äº†ï¼Œè¿™è°é¡¶å¾—ä½ï¼</p>
<p>åœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹ï¼ŒHooksä¾¿æ¨ªç©ºå‡ºä¸–äº†ï¼</p>
<h1 id="Hooksä»‹ç»åŠä½¿ç”¨"><a href="#Hooksä»‹ç»åŠä½¿ç”¨" class="headerlink" title="Hooksä»‹ç»åŠä½¿ç”¨"></a>Hooksä»‹ç»åŠä½¿ç”¨</h1><p>é™„ä¸Šä¸€æ³¢å®˜ç½‘<span class="exturl" data-url="aHR0cHM6Ly96aC1oYW5zLnJlYWN0anMub3JnL2RvY3MvaG9va3MtcmVmZXJlbmNlLmh0bWw=">Hooks APIæ–‡æ¡£</span></p>
<h2 id="useState"><a href="#useState" class="headerlink" title="useState"></a>useState</h2><h3 id="åŸºæœ¬ä»‹ç»"><a href="#åŸºæœ¬ä»‹ç»" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><p>åœ¨ä¸Šé¢è®²ä¼ ç»Ÿclassç»„ä»¶çš„å¼Šç«¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬æåˆ°äº†å‡½æ•°å¼ç»„ä»¶æ²¡æ³•æœ‰è‡ªå·±çš„çŠ¶æ€ï¼Œé‚£ä¹ˆState Hooksæ¥äº†ã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€æ®µclassç»„ä»¶ä»£ç çš„å†™æ³•ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Example</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>You clicked &#123;this.state.count&#125; times<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> this.setState(&#123; count: this.state.count + 1 &#125;)&#125;&gt;</span></span><br><span class="line"><span class="xml">          Click me</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬åœ¨å‡½æ•°å¼ç»„ä»¶é‡Œå®ç°è¿™ä¸€ç‚¹ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å£°æ˜ä¸€ä¸ªå« &quot;count&quot; çš„ state å˜é‡ï¼Œåˆ©ç”¨çš„æ˜¯è§£æ„èµ‹å€¼</span></span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>You clicked &#123;count&#125; times<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;</span></span><br><span class="line"><span class="xml">        Click me</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>useState</code>æ˜¯reactè‡ªå¸¦çš„ä¸€ä¸ªhookå‡½æ•°ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯ç”¨æ¥å£°æ˜çŠ¶æ€å˜é‡ã€‚<code>useState</code>è¿™ä¸ªå‡½æ•°æ¥æ”¶çš„å‚æ•°æ˜¯æˆ‘ä»¬çš„çŠ¶æ€åˆå§‹å€¼ï¼ˆinitial stateï¼‰ï¼Œå®ƒè¿”å›äº†ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„çš„ç¬¬<code>[0]</code>é¡¹æ˜¯å½“å‰å½“å‰çš„çŠ¶æ€å€¼ï¼Œç¬¬<code>[1]</code>é¡¹æ˜¯å¯ä»¥æ”¹å˜çŠ¶æ€å€¼çš„æ–¹æ³•å‡½æ•°ã€‚</p>
<p>æ•°ç»„çš„è§£æ„èµ‹å€¼æ˜¯æ¶ˆè€—æ€§èƒ½çš„äº‹æƒ…ï¼Œä¹Ÿå¯ä»¥è¿™ä¹ˆå†™ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> _useState = useState(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">let</span> count = _useState[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">let</span> setCount = _useState[<span class="number">1</span>];</span><br></pre></td></tr></table></figure>

<h3 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><blockquote>
<p>å®šä¹‰</p>
</blockquote>
<p>åˆ†ä¸ºä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li>ç›´æ¥ä¼ å…¥ä¸€ä¸ªå€¼ã€å¯¹è±¡</li>
<li>ä¼ å…¥ä¸€ä¸ªå‡½æ•°</li>
</ul>
<p>ç¬¬ä¸€ç§æ–¹å¼å°±ä¸å¤šè®²äº†ï¼Œæˆ‘ä»¬æ¥çœ‹ç¬¬äºŒç§æ–¹å¼ï¼š</p>
<p>å¦‚æœåˆå§‹åŒ–å‚æ•°æ¯”è¾ƒå¤æ‚ï¼Œè¦é€šè¿‡è®¡ç®—è·å¾—ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°è¿”å›å€¼ä¸ºæ–°stateï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter5</span>(<span class="params">props</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Counter5 render&#x27;</span>);</span><br><span class="line">    <span class="comment">// è¿™ä¸ªå‡½æ•°åªåœ¨åˆå§‹æ¸²æŸ“æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œåç»­æ›´æ–°çŠ¶æ€é‡æ–°æ¸²æŸ“ç»„ä»¶æ—¶ï¼Œè¯¥å‡½æ•°å°±ä¸ä¼šå†è¢«è°ƒç”¨</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getInitState</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="attr">number</span>:props.number&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> [counter,setCounter] = useState(getInitState);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="xml">           <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;counter.number&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">           <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>setCounter(&#123;number:counter.number+1&#125;)&#125;&gt;+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">           <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>setCounter(counter)&#125;&gt;setCounter<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯¹äºstateçš„æ›´æ–°ï¼Œæˆ‘ä»¬åŒæ ·ä¹Ÿæœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li>ç¬¬ä¸€ç§æ–¹å¼ï¼šç»™setStateä¼ å…¥ä¸€ä¸ªæ•°å€¼ã€å¯¹è±¡</li>
<li>ç¬¬äºŒç§æ–¹å¼ï¼š<strong>å‡½æ•°å¼æ›´æ–°</strong>ã€‚ç»™setStateä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œå‚æ•°ä¸ºpreStateï¼Œè¿”å›æ–°stateã€‚<ul>
<li>å¦‚æœæ–°çš„ state éœ€è¦é€šè¿‡ä½¿ç”¨å…ˆå‰çš„ state è®¡ç®—å¾—å‡ºï¼Œé‚£ä¹ˆå¯ä»¥å°†å›è°ƒå‡½æ•°å½“åšå‚æ•°ä¼ é€’ç»™ setStateã€‚è¯¥å›è°ƒå‡½æ•°å°†æ¥æ”¶å…ˆå‰çš„ stateï¼Œå¹¶è¿”å›ä¸€ä¸ªæ›´æ–°åçš„å€¼ã€‚</li>
</ul>
</li>
</ul>
<p>æ³¨æ„ä¸€ç‚¹ï¼Œå’Œç±»ç»„ä»¶çš„setStateæœ‰ä¸€ç‚¹å¾ˆå¤§çš„åŒºåˆ«ï¼šuseStateä¸ä¼šè‡ªåŠ¨åˆå¹¶å¹¶ç”Ÿæˆä¸€ä¸ªæ–°çš„stateã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.setState(&#123;</span><br><span class="line">  firstName</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šçš„ä»£ç ï¼Œæ˜¯ä¼šè‡ªåŠ¨åˆå¹¶stateçš„ã€‚ä½†æ˜¯useStateä¸ä¼šè‡ªåŠ¨åˆå¹¶ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç”¨å‡½æ•°å¼çš„ setState ç»“åˆå±•å¼€è¿ç®—ç¬¦æ¥è¾¾åˆ°åˆå¹¶æ›´æ–°å¯¹è±¡çš„æ•ˆæœã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">setUserInfo(<span class="function"><span class="params">preState</span>=&gt;</span> (&#123;</span><br><span class="line">  ...preState,</span><br><span class="line">  <span class="attr">fristName</span>: newValue,</span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å½“ç„¶ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦è®©Stateè‡ªåŠ¨åˆå¹¶ï¼Œå¯ä»¥ä½¿ç”¨ahooksåº“çš„useSetStateæ¥æ›¿ä»£stateã€‚</p>
</blockquote>
<p>å°ç»†èŠ‚ï¼š</p>
<ul>
<li>Hook å†…éƒ¨ä½¿ç”¨ <strong>Object.is</strong> æ¥æ¯”è¾ƒæ–°/æ—§ state æ˜¯å¦ç›¸ç­‰</li>
<li>ä¸ class ç»„ä»¶ä¸­çš„ setState æ–¹æ³•ä¸åŒï¼Œå¦‚æœä½ ä¿®æ”¹çŠ¶æ€çš„æ—¶å€™ï¼Œ<strong>ä¼ çš„çŠ¶æ€å€¼æ²¡æœ‰å˜åŒ–ï¼Œåˆ™ä¸é‡æ–°æ¸²æŸ“</strong></li>
<li>ä¸ class ç»„ä»¶ä¸­çš„ setState æ–¹æ³•ä¸åŒï¼Œ<strong>useState ä¸ä¼šè‡ªåŠ¨åˆå¹¶æ›´æ–°å¯¹è±¡</strong>ã€‚ä½ å¯ä»¥ç”¨å‡½æ•°å¼çš„ setState ç»“åˆå±•å¼€è¿ç®—ç¬¦æ¥è¾¾åˆ°åˆå¹¶æ›´æ–°å¯¹è±¡çš„æ•ˆæœ</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [counter,setCounter] = useState(&#123;<span class="attr">name</span>:<span class="string">&#x27;è®¡æ•°å™¨&#x27;</span>,<span class="attr">number</span>:<span class="number">0</span>&#125;);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;render Counter&#x27;</span>)</span><br><span class="line">    <span class="comment">// å¦‚æœä½ ä¿®æ”¹çŠ¶æ€çš„æ—¶å€™ï¼Œä¼ çš„çŠ¶æ€å€¼æ²¡æœ‰å˜åŒ–ï¼Œåˆ™ä¸é‡æ–°æ¸²æŸ“</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;counter.name&#125;:&#123;counter.number&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>setCounter(&#123;...counter,number:counter.number+1&#125;)&#125;&gt;+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>setCounter(counter)&#125;&gt;++<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="æ¯ä¸€æ¬¡æ¸²æŸ“çš„æ—¶å€™éƒ½æ˜¯ç‹¬ç«‹çš„é—­åŒ…"><a href="#æ¯ä¸€æ¬¡æ¸²æŸ“çš„æ—¶å€™éƒ½æ˜¯ç‹¬ç«‹çš„é—­åŒ…" class="headerlink" title="æ¯ä¸€æ¬¡æ¸²æŸ“çš„æ—¶å€™éƒ½æ˜¯ç‹¬ç«‹çš„é—­åŒ…"></a>æ¯ä¸€æ¬¡æ¸²æŸ“çš„æ—¶å€™éƒ½æ˜¯ç‹¬ç«‹çš„é—­åŒ…</h3><ul>
<li>æ¯ä¸€æ¬¡æ¸²æŸ“éƒ½æœ‰å®ƒè‡ªå·±çš„ Props å’Œ State</li>
<li>æ¯ä¸€æ¬¡æ¸²æŸ“éƒ½æœ‰å®ƒè‡ªå·±çš„äº‹ä»¶å¤„ç†å‡½æ•°</li>
<li>å½“ç‚¹å‡»æ›´æ–°çŠ¶æ€çš„æ—¶å€™ï¼Œå‡½æ•°ç»„ä»¶éƒ½ä¼šé‡æ–°è¢«è°ƒç”¨ï¼Œé‚£ä¹ˆæ¯æ¬¡æ¸²æŸ“éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œå–åˆ°çš„å€¼ä¸ä¼šå—åé¢æ“ä½œçš„å½±å“</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> [number,setNumber] = useState(<span class="number">0</span>);</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">alertNumber</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">      <span class="comment">// alert åªèƒ½è·å–åˆ°ç‚¹å‡»æŒ‰é’®æ—¶çš„é‚£ä¸ªçŠ¶æ€</span></span><br><span class="line">      alert(number);</span><br><span class="line">    &#125;,<span class="number">3000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;number&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>setNumber(number+1)&#125;&gt;+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;alertNumber&#125;</span>&gt;</span>alertNumber<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="useRef"><a href="#useRef" class="headerlink" title="useRef"></a>useRef</h2><p>è¿™ä¸ª<code>hook</code>é€šå¸¸ç”¨æ¥è·å–å­ç»„ä»¶ï¼Œè¿˜å¯ä»¥ç”¨æ¥ç¼“å­˜æ•°æ®â— </p>
<blockquote>
<p>ä¸€ï¼šè·å–å­ç»„ä»¶</p>
</blockquote>
<p>å’Œç±»ç»„ä»¶ä¸­çš„createRefä¸€æ ·çš„ä½œç”¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°ç»„ä»¶é‡Œå®ç°ç›¸åŒçš„æ•ˆæœï¼Œä½¿ç”¨refè·å–å­ç»„ä»¶ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">TextInputWithFocusButton</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> inputEl = useRef(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">const</span> onButtonClick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// `current` æŒ‡å‘å·²æŒ‚è½½åˆ° DOM ä¸Šçš„æ–‡æœ¬è¾“å…¥å…ƒç´ </span></span><br><span class="line">    inputEl.current.focus();</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;inputEl&#125;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onButtonClick&#125;</span>&gt;</span>Focus the input<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>äºŒï¼šç¼“å­˜æ•°æ®</p>
</blockquote>
<p>é‡ç‚¹çœ‹ä¸‹<code>useRef</code>å¦‚ä½•ç¼“å­˜æ•°æ®çš„ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">UseRef</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> [data, setData] = useState(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">let</span> initData = &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;lisa&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="string">&#x27;20&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> refData = useRef(initData)   <span class="comment">//refDataå£°æ˜åç»„ä»¶å†æ¬¡æ¸²æŸ“ä¸ä¼šå†é‡æ–°èµ‹åˆå§‹å€¼</span></span><br><span class="line">    <span class="built_in">console</span>.log(refData.current);</span><br><span class="line">    refData.current = &#123;       <span class="comment">//ä¿®æ”¹refDataåé¡µé¢ä¸ä¼šé‡æ–°æ¸²æŸ“</span></span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;liyang &#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="string">&#x27;18&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> reRender = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        setData(data + <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;reRender&#125;</span>&gt;</span>ç‚¹å‡»é‡æ–°æ¸²æŸ“ç»„ä»¶<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»„ä»¶é‡æ–°æ¸²æŸ“åï¼Œå˜é‡ä¼šè¢«é‡æ–°èµ‹å€¼ï¼Œå¯ä»¥ç”¨<code>useRef</code>ç¼“å­˜æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®æ”¹å˜åæ˜¯ä¸ä¼šè§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“çš„ï¼Œå¦‚æœç”¨<code>useState</code>ä¿å­˜æ•°æ®ï¼Œæ•°æ®æ”¹å˜åä¼šå¯¼è‡´ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œæ‰€ä»¥æˆ‘ä»¬æƒ³æ‚„æ‚„ä¿å­˜æ•°æ®ï¼Œ<code>useRef</code>æ˜¯ä¸äºŒé€‰æ‹©ğŸ‘Š</p>
<p>è¿™ä¸ªå¯ä»¥ç”¨æ¥è§£å†³useEffectçš„é—­åŒ…é™·é˜±é—®é¢˜ï¼Œåé¢ä¼šæåˆ°ã€‚</p>
<h2 id="useEffectå’ŒuseLayoutEffect"><a href="#useEffectå’ŒuseLayoutEffect" class="headerlink" title="useEffectå’ŒuseLayoutEffect"></a>useEffectå’ŒuseLayoutEffect</h2><p>è¿™éƒ¨åˆ†çš„å®˜ç½‘å¯ç‚¹å‡»<span class="exturl" data-url="aHR0cHM6Ly96aC1oYW5zLnJlYWN0anMub3JnL2RvY3MvaG9va3MtZWZmZWN0Lmh0bWw=">é“¾æ¥</span>ã€<span class="exturl" data-url="aHR0cHM6Ly9vdmVycmVhY3RlZC5pby96aC1oYW5zL2EtY29tcGxldGUtZ3VpZGUtdG8tdXNlZWZmZWN0Lw==">useEffect å®Œæ•´æŒ‡å—</span>ã€‚</p>
<p>åœ¨ä¸Šé¢è®²ä¼ ç»Ÿclassç»„ä»¶çš„å¼Šç«¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬æåˆ°äº†â€œé€»è¾‘é‡å¤ä¹¦å†™çš„é—®é¢˜â€ï¼Œæˆ‘ä»¬æ¥çœ‹ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Example</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.title = <span class="string">`You clicked <span class="subst">$&#123;<span class="built_in">this</span>.state.count&#125;</span> times`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">componentDidUpdate</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.title = <span class="string">`You clicked <span class="subst">$&#123;<span class="built_in">this</span>.state.count&#125;</span> times`</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>You clicked &#123;this.state.count&#125; times<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> this.setState(&#123; count: this.state.count + 1 &#125;)&#125;&gt;</span></span><br><span class="line"><span class="xml">          Click me</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°åŒä¸€ä¸ªé€»è¾‘ï¼Œæˆ‘ä»¬è¦åœ¨componentDidMounté‡Œå’ŒcomponentDidUpdateå†™ä¸¤æ¬¡ï¼Œè€ŒEffect Hooksè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<blockquote>
<p>å¯ä»¥æŠŠ <code>useEffect</code> Hook çœ‹åš <code>componentDidMount</code>ï¼Œ<code>componentDidUpdate</code> å’Œ <code>componentWillUnmount</code> è¿™ä¸‰ä¸ªå‡½æ•°çš„ç»„åˆã€‚</p>
<p>å¹¶ä¸”ä¸ <code>componentDidMount</code> æˆ– <code>componentDidUpdate</code> ä¸åŒï¼Œä½¿ç”¨ <code>useEffect</code> è°ƒåº¦çš„ effect ä¸ä¼šé˜»å¡æµè§ˆå™¨æ›´æ–°å±å¹•ï¼Œè¿™è®©ä½ çš„åº”ç”¨çœ‹èµ·æ¥å“åº”æ›´å¿«ã€‚</p>
</blockquote>
<p>ç›´æ¥æ¥çœ‹ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç±»ä¼¼äºcomponentDidMount å’Œ componentDidUpdate:</span></span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æ›´æ–°æ–‡æ¡£çš„æ ‡é¢˜</span></span><br><span class="line">    <span class="built_in">document</span>.title = <span class="string">`You clicked <span class="subst">$&#123;count&#125;</span> times`</span>;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>You clicked &#123;count&#125; times<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;</span></span><br><span class="line"><span class="xml">        Click me</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ®µä»£ç å°±ç­‰ä»·äºï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Example</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.title = <span class="string">`You clicked <span class="subst">$&#123;<span class="built_in">this</span>.state.count&#125;</span> times`</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentDidUpdate</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.title = <span class="string">`You clicked <span class="subst">$&#123;<span class="built_in">this</span>.state.count&#125;</span> times`</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>You clicked &#123;this.state.count&#125; times<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> this.setState(&#123; count: this.state.count + 1 &#125;)&#125;&gt;</span></span><br><span class="line"><span class="xml">          Click me</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Effectæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæˆ‘ä»¬å†™çš„æœ‰çŠ¶æ€ç»„ä»¶ï¼Œé€šå¸¸ä¼šäº§ç”Ÿå¾ˆå¤šçš„å‰¯ä½œç”¨ï¼ˆside effectï¼‰ï¼Œæ¯”å¦‚å‘èµ·ajaxè¯·æ±‚è·å–æ•°æ®ï¼Œæ·»åŠ ä¸€äº›ç›‘å¬çš„æ³¨å†Œå’Œå–æ¶ˆæ³¨å†Œï¼Œæ‰‹åŠ¨ä¿®æ”¹domç­‰ç­‰ã€‚æˆ‘ä»¬ä¹‹å‰éƒ½æŠŠè¿™äº›å‰¯ä½œç”¨çš„å‡½æ•°å†™åœ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°é’©å­é‡Œï¼Œæ¯”å¦‚componentDidMountï¼ŒcomponentDidUpdateå’ŒcomponentWillUnmountã€‚è€Œç°åœ¨çš„useEffectå°±ç›¸å½“ä¸è¿™äº›å£°æ˜å‘¨æœŸå‡½æ•°é’©å­çš„é›†åˆä½“ã€‚å®ƒä»¥ä¸€æŠµä¸‰ã€‚</p>
<ul>
<li>æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šè°ƒç”¨ä¸€æ¬¡Effectï¼ŒåŒ…æ‹¬åˆæ¬¡æ¸²æŸ“å’Œæ›´æ–°æ¸²æŸ“ã€‚è¿™æ ·å­å°±ä¸ç”¨é‡å¤å†™æŸäº›é€»è¾‘äº†ã€‚</li>
<li>useEffectä¸­å®šä¹‰çš„å‰¯ä½œç”¨å‡½æ•°çš„æ‰§è¡Œ<strong>ä¸ä¼šé˜»ç¢æµè§ˆå™¨æ›´æ–°è§†å›¾</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™äº›å‡½æ•°æ˜¯<strong>å¼‚æ­¥æ‰§è¡Œ</strong>çš„ï¼Œè€Œä¹‹å‰çš„componentDidMountæˆ–componentDidUpdateä¸­çš„ä»£ç åˆ™æ˜¯åŒæ­¥æ‰§è¡Œçš„ã€‚è¿™ç§å®‰æ’å¯¹å¤§å¤šæ•°å‰¯ä½œç”¨è¯´éƒ½æ˜¯åˆç†çš„ï¼Œä½†æœ‰çš„æƒ…å†µé™¤å¤–ï¼Œæ¯”å¦‚æˆ‘ä»¬æœ‰æ—¶å€™éœ€è¦å…ˆæ ¹æ®DOMè®¡ç®—å‡ºæŸä¸ªå…ƒç´ çš„å°ºå¯¸å†é‡æ–°æ¸²æŸ“ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¸Œæœ›è¿™æ¬¡é‡æ–°æ¸²æŸ“æ˜¯åŒæ­¥å‘ç”Ÿçš„ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä¼šåœ¨æµè§ˆå™¨çœŸçš„å»ç»˜åˆ¶è¿™ä¸ªé¡µé¢å‰å‘ç”Ÿã€‚</li>
</ul>
<blockquote>
<p>é‚£ä¹ˆå¦‚ä½•å–æ¶ˆEffectå‘¢ï¼Ÿ</p>
</blockquote>
<p>å¾ˆç®€å•ï¼Œåœ¨useEffectï¼ˆï¼‰å‡½æ•°é‡Œreturnä¸€ä¸ªå‡½æ•°ï¼Œåœ¨è¿™ä¸ªå‡½æ•°é‡Œä¹¦å†™å–æ¶ˆEffectçš„é€»è¾‘ã€‚</p>
<p>ä½†æ˜¯æœ‰ä¸€ç‚¹ä¸åŒçš„æ˜¯ï¼Œå’ŒcomponentWillUnmountä¸åŒï¼š</p>
<ul>
<li><code>componentWillUnmount</code>åªä¼šåœ¨ç»„ä»¶è¢«é”€æ¯å‰æ‰§è¡Œä¸€æ¬¡</li>
<li>useEffectåœ¨æ¯æ¬¡ç»„ä»¶æ¸²æŸ“çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡ã€‚é‡Œé¢returnå‡½æ•°ä¹Ÿä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</li>
</ul>
<blockquote>
<p>ä¸ºä»€ä¹ˆæ¯æ¬¡æ¸²æŸ“é¡µé¢çš„æ—¶å€™éƒ½è¦è°ƒç”¨ä¸€æ¬¡Effectï¼Ÿ</p>
</blockquote>
<p>æˆ‘ä»¬æ¥çœ‹ä»¥ä¸‹çš„ä»£ç ï¼Œä»‹ç»äº†ä¸€ä¸ªç”¨äºæ˜¾ç¤ºå¥½å‹æ˜¯å¦åœ¨çº¿çš„ <code>FriendStatus</code> ç»„ä»¶ã€‚ä» class ä¸­ props è¯»å– <code>friend.id</code>ï¼Œç„¶ååœ¨ç»„ä»¶æŒ‚è½½åè®¢é˜…å¥½å‹çš„çŠ¶æ€ï¼Œå¹¶åœ¨å¸è½½ç»„ä»¶çš„æ—¶å€™å–æ¶ˆè®¢é˜…ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  ChatAPI.subscribeToFriendStatus(</span><br><span class="line">    <span class="built_in">this</span>.props.friend.id,</span><br><span class="line">    <span class="built_in">this</span>.handleStatusChange</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">componentWillUnmount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  ChatAPI.unsubscribeFromFriendStatus(</span><br><span class="line">    <span class="built_in">this</span>.props.friend.id,</span><br><span class="line">    <span class="built_in">this</span>.handleStatusChange</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ä½†æ˜¯å½“ç»„ä»¶å·²ç»æ˜¾ç¤ºåœ¨å±å¹•ä¸Šæ—¶ï¼Œ<code>friend</code> prop å‘ç”Ÿå˜åŒ–æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</strong> æˆ‘ä»¬çš„ç»„ä»¶å°†ç»§ç»­å±•ç¤ºåŸæ¥çš„å¥½å‹çŠ¶æ€ã€‚è¿™æ˜¯ä¸€ä¸ª bugã€‚è€Œä¸”æˆ‘ä»¬è¿˜ä¼šå› ä¸ºå–æ¶ˆè®¢é˜…æ—¶ä½¿ç”¨é”™è¯¯çš„å¥½å‹ ID å¯¼è‡´å†…å­˜æ³„éœ²æˆ–å´©æºƒçš„é—®é¢˜ã€‚</p>
<p>å¦‚æœæ˜¯åœ¨ç±»ç»„ä»¶é‡Œï¼Œæˆ‘ä»¬åˆ™éœ€è¦æ·»åŠ  <code>componentDidUpdate</code> æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">componentDidUpdate</span>(<span class="params">prevProps</span>)</span> &#123;</span><br><span class="line">  <span class="comment">// å–æ¶ˆè®¢é˜…ä¹‹å‰çš„ friend.id</span></span><br><span class="line">  ChatAPI.unsubscribeFromFriendStatus(</span><br><span class="line">    prevProps.friend.id,</span><br><span class="line">    <span class="built_in">this</span>.handleStatusChange</span><br><span class="line">  );</span><br><span class="line">  <span class="comment">// è®¢é˜…æ–°çš„ friend.id</span></span><br><span class="line">  ChatAPI.subscribeToFriendStatus(</span><br><span class="line">    <span class="built_in">this</span>.props.friend.id,</span><br><span class="line">    <span class="built_in">this</span>.handleStatusChange</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯åœ¨Effect Hookså°±ä¸ç”¨å•¦ï¼Œå› ä¸ºæ¯æ¬¡æ¸²æŸ“çš„æ—¶å€™ä¼šé‡æ–°è·å–æ–°çš„friend.idã€‚</p>
<blockquote>
<p>å¦‚æœä¸æƒ³è¦æ¯æ¬¡æ¸²æŸ“éƒ½æ‰§è¡Œä¸€æ¬¡Effectäº‹ä»¶ï¼Œå¦‚ä½•è®¾ç½®ï¼Ÿ</p>
</blockquote>
<p>åœ¨classç»„ä»¶å½“ä¸­æˆ‘ä»¬ä¸»è¦é€šè¿‡componentDidUpdateæ¥è¿›è¡Œè®¾ç½®ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">componentDidUpdate</span>(<span class="params">prevProps, prevState</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (prevState.count !== <span class="built_in">this</span>.state.count) &#123;</span><br><span class="line">    <span class="built_in">document</span>.title = <span class="string">`You clicked <span class="subst">$&#123;<span class="built_in">this</span>.state.count&#125;</span> times`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨Effect Hooksé‡Œï¼Œæˆ‘ä»¬åªéœ€è¦ç»™<code>useEffect</code>ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°å°±è¡Œï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">document</span>.title = <span class="string">`You clicked <span class="subst">$&#123;count&#125;</span> times`</span>;</span><br><span class="line">&#125;, [count]); <span class="comment">// ä»…åœ¨ count æ›´æ”¹æ—¶æ›´æ–°</span></span><br></pre></td></tr></table></figure>

<p>è¿™å°±ä»£è¡¨åªæœ‰åœ¨countæ›´æ–°çš„æ—¶å€™æ‰è°ƒç”¨Effectï¼Œè¿™å°±æ˜¯ä¸€ä¸ªå°ä¼˜åŒ–å•¦ã€‚</p>
<blockquote>
<p>useEffectæ¨¡æ‹Ÿç”Ÿå‘½å‘¨æœŸ</p>
</blockquote>
<ul>
<li>æ¨¡æ‹ŸcomponentDidMountï¼šç¬¬äºŒä¸ªå‚æ•°ä¼ ä¸€ä¸ªç©ºæ•°ç»„ã€‚</li>
</ul>
<blockquote>
<p>å°æ€»ç»“ï¼š</p>
</blockquote>
<ul>
<li><code>useEffect</code>å’Œ<code>useState</code>ä¸€æ ·ï¼Œå¯ä»¥è°ƒç”¨å¤šæ¬¡ã€‚</li>
<li>å¯ä»¥æŠŠ <code>useEffect</code> Hook çœ‹åš <code>componentDidMount</code>ï¼Œ<code>componentDidUpdate</code> å’Œ <code>componentWillUnmount</code> è¿™ä¸‰ä¸ªå‡½æ•°çš„ç»„åˆã€‚</li>
<li>Effect Hooksä¸ <code>componentDidMount</code> æˆ– <code>componentDidUpdate</code> ä¸åŒï¼Œä½¿ç”¨ <code>useEffect</code> è°ƒåº¦çš„ effect æ˜¯å¼‚æ­¥çš„ï¼Œä¸ä¼šé˜»å¡æµè§ˆå™¨æ›´æ–°å±å¹•ï¼Œè¿™è®©ä½ çš„åº”ç”¨çœ‹èµ·æ¥å“åº”æ›´å¿«ã€‚</li>
<li>å’ŒcomponentWillUnmountä¸åŒä¹‹å¤„ä¸ºï¼š<ul>
<li><code>componentWillUnmount</code>åªä¼šåœ¨ç»„ä»¶è¢«é”€æ¯å‰æ‰§è¡Œä¸€æ¬¡</li>
<li>useEffectåœ¨æ¯æ¬¡ç»„ä»¶æ¸²æŸ“çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡ã€‚é‡Œé¢returnçš„å‡½æ•°ä¹Ÿä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</li>
</ul>
</li>
<li>æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ•°ç»„ï¼Œæ•°ç»„çš„å†…å®¹æ˜¯ä¾èµ–é¡¹<code>deps</code>ï¼Œåªæœ‰ä¾èµ–é¡¹æ”¹å˜åæ‰§è¡Œå›è°ƒå‡½æ•°ã€‚</li>
</ul>
<h3 id="useLayoutEffect"><a href="#useLayoutEffect" class="headerlink" title="useLayoutEffect"></a>useLayoutEffect</h3><p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œeffect ä¸éœ€è¦åŒæ­¥åœ°æ‰§è¡Œã€‚åœ¨ä¸ªåˆ«æƒ…å†µä¸‹ï¼ˆä¾‹å¦‚æµ‹é‡å¸ƒå±€ï¼‰ï¼Œåˆ™è¦ä½¿ç”¨useLayoutEffectã€‚</p>
<p>userEffectå’ŒuserLayoutEffectç”¨æ³•ä¸€æ ·ï¼ŒåŒºåˆ«å¦‚ä¸‹ï¼š</p>
<ul>
<li>useEffectæ˜¯<strong>å¼‚æ­¥è°ƒåº¦</strong>ï¼Œå…¶æ³¨å†Œçš„effect<strong>ä¸ä¼šé˜»å¡æ¸²æŸ“</strong>ï¼Œä¼šåœ¨<strong>æ¸²æŸ“å</strong>è°ƒç”¨effectã€‚</li>
<li>useLayoutEffectæ˜¯<strong>åŒæ­¥è°ƒåº¦</strong>ï¼Œå…¶æ³¨å†Œçš„effect<strong>ä¼šé˜»å¡æ¸²æŸ“</strong>ï¼Œä¼šåœ¨DOMä¿®æ”¹åã€<strong>é¡µé¢æ¸²æŸ“å‰</strong>è°ƒç”¨effectã€‚ä¸useLayoutEffect å’Œ componentDidMount å’Œ componentDidUpdate è§¦å‘æ—¶æœºä¸€è‡´ã€‚</li>
</ul>
<p>é‚£ä¹ˆå¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿ</p>
<ul>
<li>å¦‚æœå›è°ƒå‡½æ•°ä¼š<strong>ä¿®æ”¹<code>state</code>å¯¼è‡´ç»„ä»¶é‡æ–°æ¸²æŸ“</strong>ï¼Œå¯ä»¥<code>useLayoutEffect</code>ï¼Œå› ä¸ºè¿™æ—¶å€™ç”¨<code>useEffect</code>å¯èƒ½ä¼šé€ æˆé¡µé¢é—ªçƒï¼› </li>
<li>å¦‚æœå›è°ƒå‡½æ•°ä¸­<strong>æ‰§è¡Œäº†è€—æ—¶çš„åŒæ­¥æ“ä½œ</strong>ï¼ˆå¦‚è¯·æ±‚æ•°æ®æˆ–è€…jsæ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼‰ï¼Œå»ºè®®ä½¿ç”¨<code>useEffect</code>ï¼›å› ä¸ºè¿™æ—¶å€™ç”¨<code>useLayoutEffect</code>å µå¡æµè§ˆå™¨æ¸²æŸ“ã€‚</li>
</ul>
<h3 id="é—­åŒ…é™·é˜±"><a href="#é—­åŒ…é™·é˜±" class="headerlink" title="é—­åŒ…é™·é˜±"></a>é—­åŒ…é™·é˜±</h3><p>æˆ‘ä»¬æ¥ç›´æ¥çœ‹ä»¥ä¸‹çš„ä»£ç ï¼Œæœ‰ä¸€ä¸ªéœ€æ±‚å½“è¿›å…¥é¡µé¢ 3s åï¼Œè¾“å‡ºå½“å‰æœ€æ–°çš„ countï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Demo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(count)</span><br><span class="line">    &#125;, <span class="number">3000</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(c =&gt; c + 1)&#125;</span></span><br><span class="line"><span class="xml">    &gt;</span></span><br><span class="line"><span class="xml">      click</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶æˆ‘ä»¬è¿›å…¥é¡µé¢ä¹‹åï¼Œæ— è®ºç‚¹å‡»å¤šå°‘æ¬¡æŒ‰é’®ï¼Œè¾“å‡ºçš„å€¼åªä¼šæ˜¯0ã€‚è¿™å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„é—­åŒ…é™·é˜±äº†ï¼Œè™½ç„¶ç‚¹å‡»æŒ‰é’®ï¼Œç»„ä»¶çš„stateä¼šæ›´æ–°ï¼Œä½†æ˜¯ç”±äºä¾èµ–é¡¹æ²¡æœ‰ä¼ å…¥countï¼Œè¯¥å›è°ƒå‡½æ•°å¹¶ä¸ä¼šé‡æ–°æ‰§è¡Œï¼Œæ‹¿åˆ°çš„countå€¼ä¹Ÿæ²¡æœ‰æ›´æ–°ã€‚</p>
<p>ä¼¼ä¹ï¼Œé—®é¢˜å¾ˆå¥½è§£å†³ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨useEffecté‡Œä¼ å…¥countä¸å°±å®Œäº†ï¼Œå°±åƒè¿™æ ·ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(count)</span><br><span class="line">  &#125;, <span class="number">3000</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, [count])</span><br></pre></td></tr></table></figure>

<p>å¦‚ä¸Šä»£ç ï¼Œæ­¤æ—¶ç¡®å®æ²¡æœ‰é—­åŒ…é—®é¢˜äº†ï¼Œä½†åœ¨æ¯æ¬¡ <code>count</code> å˜åŒ–æ—¶ï¼Œå®šæ—¶å™¨å¸è½½å¹¶é‡æ–°å¼€å§‹è®¡æ—¶äº†ï¼Œä¸æ»¡è¶³æˆ‘ä»¬çš„æœ€åˆéœ€æ±‚äº†ã€‚</p>
<p>è§£å†³çš„å”¯ä¸€åŠæ³•ä¸ºï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡ ref æ¥è®°å¿†æœ€æ–°çš„ count</span></span><br><span class="line"><span class="keyword">const</span> countRef = useRef(count);</span><br><span class="line">countRef.current = count;</span><br><span class="line"></span><br><span class="line">useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(countRef.current) <span class="comment">// dd</span></span><br><span class="line">  &#125;, <span class="number">3000</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, [])</span><br></pre></td></tr></table></figure>

<p>è™½ç„¶ä¸Šé¢çš„ä»£ç ï¼Œå¾ˆç»•ï¼Œä½†ç¡®å®ï¼Œåªæœ‰è¿™ä¸ªè§£å†³æ–¹æ¡ˆã€‚è¯·è®°ä½è¿™æ®µä»£ç ï¼ŒåŠŸèƒ½çœŸçš„å¾ˆå¼ºå¤§ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> countRef = useRef(count);</span><br><span class="line">countRef.current = count;</span><br></pre></td></tr></table></figure>

<p>ä¸ºä»€ä¹ˆrefèƒ½æ‹¿åˆ°æœ€æ–°çš„å€¼ï¼Ÿå› ä¸º<strong>åˆå§‹åŒ–çš„ <code>useRef</code> æ‰§è¡Œä¹‹åï¼Œè¿”å›çš„éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡</strong>ã€‚</p>
<h2 id="useMemo-amp-amp-useCallback-å®ç°ç¨³å®špropså€¼"><a href="#useMemo-amp-amp-useCallback-å®ç°ç¨³å®špropså€¼" class="headerlink" title="useMemo &amp;&amp; useCallback å®ç°ç¨³å®špropså€¼"></a>useMemo &amp;&amp; useCallback å®ç°ç¨³å®špropså€¼</h2><p>è¿™ä¸¤ä¸ª<code>hook</code>ç”¨äºæ€§èƒ½ä¼˜åŒ–ï¼Œå‡å°‘ç»„ä»¶çš„é‡å¤æ¸²æŸ“ï¼›</p>
<ul>
<li><p><code>useMemo</code>ï¼šæŠŠå†…è”å›è°ƒå‡½æ•°åŠä¾èµ–é¡¹æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œè¿”å›ä¸€ä¸ªmemoized<strong>å€¼</strong>ï¼Œå³<strong>ç¼“å­˜å€¼</strong>ã€‚</p>
</li>
<li><p><code>useCallback</code>ï¼šæŠŠâ€œåˆ›å»ºâ€å‡½æ•°åŠä¾èµ–é¡¹æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œè¿”å›ä¸€ä¸ªmemoized<strong>å‡½æ•°</strong>ã€‚</p>
<ul>
<li>â­useCallback æ˜¯è¦é…åˆå­ç»„ä»¶çš„ <strong><code>shouldComponentUpdate</code></strong> æˆ–è€… <strong><code>React.memo</code></strong> ä¸€èµ·æ¥ä½¿ç”¨çš„ï¼Œå¦åˆ™å°±æ˜¯åå‘ä¼˜åŒ–ã€‚</li>
</ul>
</li>
<li><p><code>useCallback(fn, deps)</code> ç›¸å½“äº <code>useMemo(() =&gt; fn, deps)</code></p>
</li>
</ul>
<blockquote>
<p>useMemoï¼šç”¨äºç¼“å­˜å•ä¸ªå˜é‡å€¼</p>
</blockquote>
<p>å‰é¢æˆ‘ä»¬è¯´è¿‡äº†å½“çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ²¡æœ‰è®¾ç½®å…³è”çŠ¶æ€çš„ <code>useEffect</code> ä¼šå…¨éƒ¨æ‰§è¡Œã€‚åŒæ ·çš„ï¼Œ<strong>é€šè¿‡è®¡ç®—å‡ºæ¥çš„å€¼æˆ–è€…å¼•å…¥çš„ç»„ä»¶ä¹Ÿä¼šé‡æ–°è®¡ç®—/æŒ‚è½½ä¸€éï¼Œå³ä½¿ä¸å…¶å…³è”çš„çŠ¶æ€æ²¡æœ‰å‘ç”Ÿä»»ä½•å˜åŒ–</strong>ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ²¡æœ‰ä½¿ç”¨ useMemo</span></span><br><span class="line"><span class="keyword">const</span> memoizedValue = computeExpensiveValue(a, b);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ useMemo</span></span><br><span class="line"><span class="keyword">const</span> memoizedValue = useMemo(<span class="function">() =&gt;</span> computeExpensiveValue(a, b), [a, b]);</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ²¡æœ‰ä½¿ç”¨ useMemoï¼Œ<code>computeExpensiveValue</code> ä¼šåœ¨æ¯ä¸€æ¬¡æ¸²æŸ“çš„æ—¶å€™æ‰§è¡Œã€‚å¦‚æœä½¿ç”¨äº† <code>useMemo</code>ï¼Œåªæœ‰åœ¨ <code>a</code> å’Œ <code>b</code> å˜åŒ–æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œä¸€æ¬¡ <code>computeExpensiveValue</code>ã€‚</p>
<p>åªè¦ç”¨äºè®¡ç®—ä¸€äº›å¤æ‚çš„é€»è¾‘ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªå€¼ï¼Œåªæœ‰åœ¨ä¾èµ–é¡¹æ›´æ–°äº†ä¹‹åæ‰ä¼šé‡æ–°è®¡ç®—å¹¶è¿”å›ä¸€ä¸ªæ–°å€¼ï¼Œè¿™ç§ä¼˜åŒ–æœ‰åŠ©äºé¿å…åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½è¿›è¡Œé«˜å¼€é”€çš„è®¡ç®—ã€‚</p>
<p><strong>å¦‚æœæ²¡æœ‰æä¾›ä¾èµ–é¡¹æ•°ç»„ï¼Œ<code>useMemo</code> åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½ä¼šè®¡ç®—æ–°çš„å€¼ã€‚</strong></p>
<p>åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å‡å°‘å­ç»„ä»¶çš„æ¸²æŸ“ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€æ®µæ²¡æœ‰ä¼˜åŒ–è¿‡çš„ä»£ç ï¼š</p>
<blockquote>
<p>useCallback</p>
</blockquote>
<p>useCallbackç»™å‡½æ•°ç”¨ï¼Œå›ºå®šä½å‡½æ•°å¼•ç”¨ï¼Œå°±ä¸ä¼šæ¯æ¬¡æ¸²æŸ“éƒ½é‡æ–°æ–°å»ºä¸€ä¸ªå‡½æ•°ã€‚</p>
<p>hooksç»„ä»¶stateæ”¹å˜åä¼šå¼•èµ·çˆ¶ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ï¼Œè€Œæ¯æ¬¡é‡æ–°æ¸²æŸ“éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°å‡½æ•°ï¼Œæ‰€ä»¥reactå­ç»„ä»¶propsåœ¨æµ…æ¯”è¾ƒçš„æ—¶å€™å°±ä¼šè®¤ä¸ºpropsæ”¹å˜äº†ï¼Œå¼•èµ·å­ç»„ä»¶ä¸å¿…è¦çš„æ¸²æŸ“ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">useCallback å¯ä»¥è®°ä½å‡½æ•°ï¼Œé¿å…å‡½æ•°é‡å¤ç”Ÿæˆï¼Œè¿™æ ·å‡½æ•°åœ¨ä¼ é€’ç»™å­ç»„ä»¶æ—¶ï¼Œå¯ä»¥é¿å…å­ç»„ä»¶é‡å¤æ¸²æŸ“ï¼Œæé«˜æ€§èƒ½ã€‚</span><br><span class="line"><span class="keyword">const</span> someFunc = useCallback(<span class="function">()=&gt;</span> &#123;</span><br><span class="line">   doSomething();</span><br><span class="line">&#125;, []);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">ExpensiveComponent</span> <span class="attr">func</span>=<span class="string">&#123;someFunc&#125;</span> /&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>useCallback æ˜¯<strong>å¿…é¡»</strong>è¦å’Œ <code>shouldComponentUpdate/React.memo</code> é…å¥—ä½¿ç”¨çš„ï¼Œæ‰ä¼šé¿å…å‚æ•°ä¸å˜çš„æƒ…å†µä¸‹çš„é‡å¤æ¸²æŸ“ï¼Œæé«˜æ€§èƒ½ã€‚</p>
<p>ä¸è¿‡ä½¿ç”¨useCallback ä¼šå¯¼è‡´ä»£ç çš„å¯è¯»æ€§å˜å·®ï¼Œåªæœ‰æ‰å­ç»„ä»¶é‡æ¸²æŸ“éå¸¸è€—è´¹æ€§èƒ½çš„æ—¶å€™æ‰æœ‰ç”¨ã€‚</p>
<h2 id="useContext"><a href="#useContext" class="headerlink" title="useContext"></a>useContext</h2><blockquote>
<p><code>useContext(MyContext)</code> ç›¸å½“äº class ç»„ä»¶ä¸­çš„ <code>static contextType = MyContext</code> æˆ–è€… <code>&lt;MyContext.Consumer&gt;</code>ã€‚</p>
</blockquote>
<p><code>useContext(MyContext)</code> åªæ˜¯è®©ä½ èƒ½å¤Ÿ<em>è¯»å–</em> context çš„å€¼ä»¥åŠè®¢é˜… context çš„å˜åŒ–ã€‚ä½ ä»ç„¶éœ€è¦åœ¨ä¸Šå±‚ç»„ä»¶æ ‘ä¸­ä½¿ç”¨ <code>&lt;MyContext.Provider&gt;</code> æ¥ä¸ºä¸‹å±‚ç»„ä»¶<em>æä¾›</em> contextï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React,&#123;createContext&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FatherComponent</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> state = xxx; <span class="comment">// åˆ›å»ºä¸€ä¸ªæ•°æ®å¯¹è±¡ã€‚</span></span><br><span class="line">    <span class="keyword">const</span> MyContext = createContext(); <span class="comment">// æ–°å»ºä¸€ä¸ªcontext</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="xml"><span class="tag">&lt;<span class="name">MyContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;&#123;state&#125;&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">SonComponent</span>/&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">MyContext.Provider</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å­ç»„ä»¶æ¥å—context</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SonComponent</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="xml"><span class="tag">&lt;<span class="name">MyContext.Consumer</span>&gt;</span></span></span><br><span class="line"><span class="xml">            &#123;</span></span><br><span class="line"><span class="xml">                value=&gt;(</span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;value.state.number&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">                )</span><br><span class="line">            &#125;</span><br><span class="line">         </span><br><span class="line">        &lt;/MyContext.Consumer&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è€Œè¿™æ ·å­çš„å†™æ³•å…¶å®æœ‰ç‚¹éº»çƒ¦çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨useContextè®©å­ç»„ä»¶çš„å†…å®¹æ›´åŠ ç®€æ´æ˜äº†ï¼Œä¸ç”¨å†å†™&lt;MyContext.Consumer&gt;äº†ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useContext&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SonComponent</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> value = useContext(MyContext);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;value.state.number&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¥æ”¶ä¸€ä¸ª context å¯¹è±¡ï¼ˆ<code>React.createContext</code> çš„è¿”å›å€¼ï¼‰å¹¶è¿”å›è¯¥ context çš„å½“å‰å€¼ã€‚å½“å‰çš„ context å€¼ç”±ä¸Šå±‚ç»„ä»¶ä¸­è·ç¦»å½“å‰ç»„ä»¶æœ€è¿‘çš„ <code>&lt;MyContext.Provider&gt;</code> çš„ <code>value</code> prop å†³å®šã€‚</p>
<p>å½“ç»„ä»¶ä¸Šå±‚æœ€è¿‘çš„ <code>&lt;MyContext.Provider&gt;</code> æ›´æ–°æ—¶ï¼Œè¯¥ Hook ä¼šè§¦å‘é‡æ¸²æŸ“ï¼Œå¹¶ä½¿ç”¨æœ€æ–°ä¼ é€’ç»™ <code>MyContext</code> provider çš„ context <code>value</code> å€¼ã€‚å³ä½¿ç¥–å…ˆä½¿ç”¨ <a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/react-api.html#reactmemo"><code>React.memo</code></a> æˆ– <a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/react-component.html#shouldcomponentupdate"><code>shouldComponentUpdate</code></a>ï¼Œä¹Ÿä¼šåœ¨ç»„ä»¶æœ¬èº«ä½¿ç”¨ <code>useContext</code> æ—¶é‡æ–°æ¸²æŸ“ã€‚</p>
<p>åˆ«å¿˜è®° <code>useContext</code> çš„å‚æ•°å¿…é¡»æ˜¯ <em>context å¯¹è±¡æœ¬èº«</em>ï¼š</p>
<ul>
<li><strong>æ­£ç¡®ï¼š</strong> <code>useContext(MyContext)</code></li>
<li><strong>é”™è¯¯ï¼š</strong> <code>useContext(MyContext.Consumer)</code></li>
<li><strong>é”™è¯¯ï¼š</strong> <code>useContext(MyContext.Provider)</code></li>
</ul>
<p>è°ƒç”¨äº† <code>useContext</code> çš„ç»„ä»¶æ€»ä¼šåœ¨ context å€¼å˜åŒ–æ—¶é‡æ–°æ¸²æŸ“ã€‚å¦‚æœé‡æ¸²æŸ“ç»„ä»¶çš„å¼€é”€è¾ƒå¤§ï¼Œä½ å¯ä»¥ <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2lzc3Vlcy8xNTE1NiNpc3N1ZWNvbW1lbnQtNDc0NTkwNjkz">é€šè¿‡ä½¿ç”¨ memoization æ¥ä¼˜åŒ–</span>ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> themes = &#123;</span><br><span class="line">  <span class="attr">light</span>: &#123;</span><br><span class="line">    <span class="attr">foreground</span>: <span class="string">&quot;#000000&quot;</span>,</span><br><span class="line">    <span class="attr">background</span>: <span class="string">&quot;#eeeeee&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">dark</span>: &#123;</span><br><span class="line">    <span class="attr">foreground</span>: <span class="string">&quot;#ffffff&quot;</span>,</span><br><span class="line">    <span class="attr">background</span>: <span class="string">&quot;#222222&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ThemeContext = React.createContext(themes.light);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">ThemeContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;themes.dark&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Toolbar</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">ThemeContext.Provider</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Toolbar</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">ThemedButton</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ThemedButton</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> theme = useContext(ThemeContext);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">background:</span> <span class="attr">theme.background</span>, <span class="attr">color:</span> <span class="attr">theme.foreground</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="xml">      I am styled by theme context!</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="useReducer"><a href="#useReducer" class="headerlink" title="useReducer"></a>useReducer</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [state, dispatch] = useReducer(reducer, initialArg, init);</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/hooks-reference.html#usestate"><code>useState</code></a> çš„æ›¿ä»£æ–¹æ¡ˆã€‚å®ƒæ¥æ”¶ä¸€ä¸ªå½¢å¦‚ <code>(state, action) =&gt; newState</code> çš„ reducerï¼Œå¹¶è¿”å›å½“å‰çš„ state ä»¥åŠä¸å…¶é…å¥—çš„ <code>dispatch</code> æ–¹æ³•ã€‚ï¼ˆæ²¡é”™ï¼Œå’ŒReduxéå¸¸åœ°åƒï¼‰</p>
<p>åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œ<code>useReducer</code> ä¼šæ¯” <code>useState</code> æ›´é€‚ç”¨ï¼Œä¾‹å¦‚ state é€»è¾‘è¾ƒå¤æ‚ä¸”åŒ…å«å¤šä¸ªå­å€¼ï¼Œæˆ–è€…ä¸‹ä¸€ä¸ª state ä¾èµ–äºä¹‹å‰çš„ state ç­‰ã€‚å¹¶ä¸”ï¼Œä½¿ç”¨ <code>useReducer</code> è¿˜èƒ½ç»™é‚£äº›ä¼šè§¦å‘æ·±æ›´æ–°çš„ç»„ä»¶åšæ€§èƒ½ä¼˜åŒ–ï¼Œå› ä¸º<a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/hooks-faq.html#how-to-avoid-passing-callbacks-down">ä½ å¯ä»¥å‘å­ç»„ä»¶ä¼ é€’ <code>dispatch</code> è€Œä¸æ˜¯å›è°ƒå‡½æ•°</a> ã€‚<br>æˆ‘ä»¬æ¥çœ‹useStateçš„ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params">&#123;initialCount&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> initialCount = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(initialCount);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="xml">      Count: &#123;count&#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(initialCount)&#125;&gt;Reset<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(prevCount =&gt; prevCount - 1)&#125;&gt;-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(prevCount =&gt; prevCount + 1)&#125;&gt;+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ä½¿ç”¨useReduceræ¥é‡å†™è¿™ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initialState = &#123;<span class="attr">count</span>: <span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reducer</span>(<span class="params">state, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;increment&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;<span class="attr">count</span>: state.count + <span class="number">1</span>&#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;decrement&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;<span class="attr">count</span>: state.count - <span class="number">1</span>&#125;;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [state, dispatch] = useReducer(reducer, initialState);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="xml">      Count: &#123;state.count&#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123;type: &#x27;decrement&#x27;&#125;)&#125;&gt;-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123;type: &#x27;increment&#x27;&#125;)&#125;&gt;+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="è‡ªå®šä¹‰Hooks"><a href="#è‡ªå®šä¹‰Hooks" class="headerlink" title="è‡ªå®šä¹‰Hooks"></a>è‡ªå®šä¹‰Hooks</h1><p>ä¸Šé¢æˆ‘ä»¬æåˆ°äº†å¤šç§é€»è¾‘å¤ç”¨ã€ä»£ç å¤ç”¨çš„æ–¹å¼ï¼Œç°åœ¨æˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸‹å¦‚ä½•é€šè¿‡è‡ªå®šä¹‰Hookså®ç°ã€‚</p>
<p>å‡è®¾ç°åœ¨æœ‰ä¸¤ä¸ªç»„ä»¶ï¼š<code>FriendStatus</code> å’Œ <code>FriendListItem</code>ï¼Œè¿™ä¸¤ä¸ªç»„ä»¶å…±äº«ç›¸åŒçš„é€»è¾‘ï¼Œéƒ½æƒ³çŸ¥é“å¥½å‹æ˜¯å¦åœ¨çº¿ã€‚</p>
<p>ä»–ä»¬çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// FriendStatus.js</span></span><br><span class="line"><span class="keyword">import</span> React, &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FriendStatus</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// â­  from here//</span></span><br><span class="line">    <span class="keyword">const</span> [isOnline, setIsOnline] = useState(<span class="literal">null</span>);</span><br><span class="line">    useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">handleStatusChange</span>(<span class="params">status</span>) </span>&#123;</span><br><span class="line">            setIsOnline(status.isOnline);</span><br><span class="line">        &#125;</span><br><span class="line">        ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange);</span><br><span class="line">        <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// â­ to here //</span></span><br><span class="line">    <span class="keyword">if</span> (isOnline === <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;Loading...&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> isOnline ? <span class="string">&#x27;Online&#x27;</span> : <span class="string">&#x27;Offline&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// FriendListItem.js</span></span><br><span class="line"><span class="keyword">import</span> React, &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FriendListItem</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// â­  from here//</span></span><br><span class="line">    <span class="keyword">const</span> [isOnline, setIsOnline] = useState(<span class="literal">null</span>);</span><br><span class="line">    useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">handleStatusChange</span>(<span class="params">status</span>) </span>&#123;</span><br><span class="line">            setIsOnline(status.isOnline);</span><br><span class="line">        &#125;</span><br><span class="line">        ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange);</span><br><span class="line">        <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// â­ to here //</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color:</span> <span class="attr">isOnline</span> ? &#x27;<span class="attr">green</span>&#x27; <span class="attr">:</span> &#x27;<span class="attr">black</span>&#x27; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="xml">            &#123;props.friend.name&#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‘ç°äº†ä»€ä¹ˆï¼Œè¿™ä¸¤ä¸ªç»„ä»¶ä¸­ï¼Œâ­ä¹‹é—´çš„ä»£ç é€»è¾‘æ˜¯ç›¸åŒçš„ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸­é—´çš„ä»£ç é€»è¾‘æŠ½ç¦»å‡ºæ¥ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useFriendStatus</span>(<span class="params">friendID</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> [isOnline, setIsOnline] = useState(<span class="literal">null</span>);</span><br><span class="line">    useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">handleStatusChange</span>(<span class="params">status</span>) </span>&#123;</span><br><span class="line">            setIsOnline(status.isOnline);</span><br><span class="line">        &#125;</span><br><span class="line">        ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange);</span><br><span class="line">        <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> isOnline;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>äºæ˜¯ä¹ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡<strong>â€œuse+å‡½æ•°åâ€</strong>çš„å½¢å¼ï¼Œå¤ç”¨è¿™ä¸ªè‡ªå®šä¹‰çš„Hookï¼Œä¸Šé¢ä¸¤ä¸ªç»„ä»¶çš„ä»£ç å°±å¯ä»¥å˜ä¸ºï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// FriendStatus.js</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FriendStatus</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> isOnline = useFriendStatus(props.friend.id);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (isOnline === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Loading...&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> isOnline ? <span class="string">&#x27;Online&#x27;</span> : <span class="string">&#x27;Offline&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// FriendListItem.js</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FriendListItem</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> isOnline = useFriendStatus(props.friend.id);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color:</span> <span class="attr">isOnline</span> ? &#x27;<span class="attr">green</span>&#x27; <span class="attr">:</span> &#x27;<span class="attr">black</span>&#x27; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="xml">      &#123;props.friend.name&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å€¼å¾—æ³¨æ„çš„ä¸¤ç‚¹æ˜¯ï¼š</p>
<ul>
<li>ä¸¤ä¸ªç»„ä»¶ä¸­ç›¸åŒçš„Hookå¹¶ä¸ä¼šå…±äº«åŒä¸€ä¸ªStateï¼Œå› æ­¤ä¸ç”¨æ‹…å¿ƒå†²çªé—®é¢˜ã€‚</li>
<li>è‡ªå®šä¹‰Hookå¿…é¡»ä»¥â€œuseâ€å¼€å¤´æ¥è¿›è¡Œè°ƒç”¨ã€‚</li>
</ul>
<p>è¯¦ç»†çš„ä¾‹å­å¯ä»¥æŸ¥çœ‹<span class="exturl" data-url="aHR0cHM6Ly96aC1oYW5zLnJlYWN0anMub3JnL2RvY3MvaG9va3MtY3VzdG9tLmh0bWw=">å®˜æ–¹æ–‡æ¡£</span></p>
<h1 id="useContext-useReduceræ¨¡æ‹ŸRedux"><a href="#useContext-useReduceræ¨¡æ‹ŸRedux" class="headerlink" title="useContext + useReduceræ¨¡æ‹ŸRedux"></a>useContext + useReduceræ¨¡æ‹ŸRedux</h1><p>ä¸»è¦æ€è·¯ä¹Ÿå¾ˆç®€å•ï¼š</p>
<ul>
<li>Providerç»„ä»¶ï¼šcreateContext()åˆ›å»ºcontextï¼Œç„¶åuseReduceråˆ›é€ stateå’Œdispatchï¼Œå¹¶é€šè¿‡providerå°†stateã€dispatchæä¾›ç»™å­ç»„ä»¶ã€‚</li>
<li>å­ç»„ä»¶ï¼šä½¿ç”¨useContextè·å–stateã€dispatchã€‚</li>
</ul>
<blockquote>
<p>ç¬¬ä¸€æ­¥ï¼šProviderç»„ä»¶æä¾›æ•°æ®</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;createContext, useReducer&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// state</span></span><br><span class="line"><span class="keyword">const</span> initialState = &#123;<span class="attr">count</span>: <span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// context</span></span><br><span class="line"><span class="keyword">const</span> ReduxContext = createContext (&#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// reducer çº¯å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reducer</span>(<span class="params">state, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;increment&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;<span class="attr">count</span>: state.count + <span class="number">1</span>&#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;decrement&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;<span class="attr">count</span>: state.count - <span class="number">1</span>&#125;;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// GlobalProvider ç»„ä»¶</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> GlobalProvider = <span class="function"><span class="params">props</span> =&gt;</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//useReducer çš„ç¬¬äºŒä¸ªå‚æ•°ä¸­ä¼ å…¥åˆå§‹å€¼</span></span><br><span class="line">    <span class="keyword">const</span> [data, dispatch] = useReducer (reducer, initialState);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="xml"><span class="tag">&lt;<span class="name">ReduxContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;&#123;data,</span> <span class="attr">dispatch</span>&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="xml">            &#123;props.children&#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">ReduxContext.Provider</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>PSï¼šå¦‚æœæƒ³è¦æˆ‘ä»¬çš„æ•°æ®æ˜¯Immutableçš„ï¼Œå¯ä»¥é…åˆç›¸å…³çš„åº“è¿›è¡Œæ“ä½œã€‚åˆå§‹åŒ–çŠ¶æ€çš„æ—¶å€™è¦ä½¿ç”¨ä¸å¯å˜æ•°æ®åº“é‡Œçš„å¯¹è±¡ï¼Œä¿®æ”¹æ•°æ®ä¹Ÿè¦ä½¿ç”¨ä¸å¯å˜æ•°æ®åº“çš„æ–¹æ³•ã€‚</p>
<blockquote>
<p>ç¬¬äºŒæ­¥ï¼šåœ¨ App.js ä¸­ç”¨ GlobalProviderè¿™ä¸ª Provider ç»„ä»¶æ¥åŒ…è£¹å­ç»„ä»¶:</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> GlobalProvider <span class="keyword">from</span> <span class="string">&quot;./context/global&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">GlobalProvider</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">SomeComponent</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">GlobalProvider</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>â€‹    ç¬¬ä¸‰æ­¥ï¼šåœ¨SomeComponenté‡Œä½¿ç”¨è¿™ä¸ªcontext</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SomeComponent</span>(<span class="params">props</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// è·å–Context</span></span><br><span class="line">    <span class="keyword">const</span> &#123;data, dispatch&#125; = useContext (ReduxContext);</span><br><span class="line">    <span class="keyword">return</span>(</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            Count: &#123;state.count&#125;</span><br><span class="line">            &lt;button onClick=&#123;<span class="function">() =&gt;</span> dispatch(&#123;<span class="attr">type</span>: <span class="string">&#x27;decrement&#x27;</span>&#125;)&#125;&gt;-&lt;/button&gt;</span><br><span class="line">            <span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123;type: &#x27;increment&#x27;&#125;)&#125;&gt;+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">        <span class="xml"><span class="tag">&lt;<span class="name">div</span>/&gt;</span></span></span><br><span class="line">   );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å­ï¼Œæˆ‘ä»¬å°±å®ç°äº†ä¸€ä¸ªç®€å•çš„Reduxäº†ï¼Œå¹¶ä¸”å’ŒReduxç›¸æ¯”ååˆ†<strong>è½»é‡</strong>ï¼Œä½†è¿™ä¸ªæ˜¯å¦èƒ½å¤Ÿæ›¿ä»£Reduxå‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä¸å¤ªèƒ½ã€‚</p>
<ul>
<li>Reduxé…å¥—åœ¨chrome æµè§ˆå™¨çš„ redux-devtools æ’ä»¶å¯ä»¥å¾ˆå¥½åœ°è¿½è¸ªçŠ¶æ€ï¼Œè¿™æ˜¯æˆ‘ä»¬æ¨¡æ‹Ÿå‡ºçš„Reduxæ— æ³•åšåˆ°çš„ã€‚</li>
<li>Reduxæœ‰è®¸å¤šå¼ºå¤§ä¸”å¥½ç”¨çš„ä¸­é—´ä»¶ï¼Œä¾‹å¦‚redux-thunkã€redux-promiseç­‰ç­‰ã€‚</li>
<li>Reduxå¯ä»¥è½»æ˜“åœ°æ‹†åˆ†Reducersï¼Œå¹¶é€šè¿‡combineReducerï¼ˆï¼‰è¿›è¡Œåˆå¹¶ï¼Œè¿™å¯¹äºçŠ¶æ€ä»£ç åˆ†å¼€ç®¡ç†æœ‰å¾ˆå¤§çš„å¥½å¤„ã€‚</li>
</ul>
<p>å¦‚æœæˆ‘ä»¬åœ¨é¡¹ç›®å½“ä¸­éœ€è¦ç”¨åˆ°è¾ƒå°‘çš„å…¨å±€çŠ¶æ€ç®¡ç†æœºåˆ¶ï¼Œä¸”å¯¹æ•°æ®æµå‘ç­‰è¦æ±‚ä¸é«˜ï¼Œåˆ™å¯ä»¥é€‰æ‹©hooksçš„æ–¹å¼ã€‚å¦‚æœåœ¨é¡¹ç›®ä¸­å…¨å±€çŠ¶æ€ç®¡ç†è¾ƒå¤šï¼Œé‚£ä¹ˆè¿˜æ˜¯æ¨èä½¿ç”¨reduxã€‚</p>
<h1 id="Hooksåº“"><a href="#Hooksåº“" class="headerlink" title="Hooksåº“"></a>Hooksåº“</h1><h2 id="ahooks"><a href="#ahooks" class="headerlink" title="ahooks"></a>ahooks</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FsaWJhYmEvaG9va3M=">ahooks</span> æ˜¯ç”±èš‚èš umi å›¢é˜Ÿã€æ·˜ç³» ice å›¢é˜Ÿä»¥åŠé˜¿é‡Œä½“è‚²å›¢é˜Ÿå…±åŒå»ºè®¾çš„ React Hooks å·¥å…·åº“ã€‚ahooks åŸºäº React Hooks çš„é€»è¾‘å°è£…èƒ½åŠ›ï¼Œæä¾›äº†å¤§é‡å¸¸è§å¥½ç”¨çš„ Hooksï¼Œå¯ä»¥æå¤§é™ä½ä»£ç å¤æ‚åº¦ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚<br>ahooks è‡´åŠ›æˆä¸ºå’Œ antd/fusion ä¸€æ ·çš„ React åŸºç¡€è®¾æ–½ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨é€»è¾‘å±‚é¢çœå»å¤§é‡çš„é‡å¤å·¥ä½œã€‚</p>
<p>æ¨èå‡ ç¯‡æ–‡ç« ï¼Œå¯ä»¥ umi hooks/ahooks æœ‰ä¸€ä¸ªæ›´æ·±å…¥çš„è®¤è¯†ï¼š</p>
<ul>
<li>ã€Š<span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC85NDAzMDE3Mw==">React Hooks åœ¨èš‚èšé‡‘æœçš„å®è·µ</span>ã€‹</li>
<li>ã€Š<span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8xMDMxNTA2MDU=">Umi Hooks - åŠ©åŠ›æ‹¥æŠ± React Hooks</span>ã€‹</li>
<li>ã€Š<span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vemh1YW5sYW4uemhpaHUuY29tL3AvMTA2Nzk2Mjk1">useRequest- èš‚èšä¸­å°æ ‡å‡†è¯·æ±‚ Hooks</span>ã€‹</li>
</ul>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC83MDQ2MzU4NDg0NjEwMTg3Mjc3">React Hooks ä½¿ç”¨è¯¯åŒºï¼Œé©³å®˜æ–¹æ–‡æ¡£</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82ODQ0OTAzNzA5OTI3ODAwODQ2">30åˆ†é’Ÿç²¾é€šReact Hooks</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82ODQ0OTA0MTY1NTAwNTE4NDE0">React Hooks æœ€ä½³å®è·µ</span></li>
</ul>

      <div class="tags">
          <a href="/tags/React/" rel="tag"><i class="ic i-tag"></i> React</a>
      </div>
  </div>

   <footer>

    <div class="meta">
  <span class="item">
    <span class="icon">
      <i class="ic i-calendar-check"></i>
    </span>
    <span class="text">Edited on</span>
    <time title="Modified: 2022-03-11 16:01:06" itemprop="dateModified" datetime="2022-03-11T16:01:06+08:00">2022-03-11</time>
  </span>
  <span id="FrontEnd/React/FrontEnd/React/ã€ReactåŸºç¡€ã€‘React Hooksä»‹ç»ä¸ä½¿ç”¨" class="item leancloud_visitors" data-flag-title="ã€ReactåŸºç¡€ã€‘React Hooksä»‹ç»ä¸ä½¿ç”¨" title="Views">
      <span class="icon">
        <i class="ic i-eye"></i>
      </span>
      <span class="text">Views</span>
      <span class="leancloud-visitors-count"></span>
      <span class="text">times</span>
  </span>
</div>

      

<div id="copyright">
<ul>
  <li class="author">
    <strong>Post author:  </strong>Monkey-HH <i class="ic i-at"><em>@</em></i>
  </li>
  <li class="link">
    <strong>Post link: </strong>
    <a href="https://monkeyhh.top/FrontEnd/React/FrontEnd/React/%E3%80%90React%E5%9F%BA%E7%A1%80%E3%80%91React%20Hooks%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8" title="ã€ReactåŸºç¡€ã€‘React Hooksä»‹ç»ä¸ä½¿ç”¨">https://monkeyhh.top/FrontEnd/React/FrontEnd/React/ã€ReactåŸºç¡€ã€‘React Hooksä»‹ç»ä¸ä½¿ç”¨</a>
  </li>
  <li class="license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> unless stating additionally.
  </li>
</ul>
</div>

  </footer>

</article>

  </div>
  

<div class="post-nav">
    <div class="item left">
      

  <a href="/FrontEnd/React/FrontEnd/React/%E3%80%90React%E5%9F%BA%E7%A1%80%E3%80%91Redux%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E7%BB%93%E5%90%88%E4%B8%8D%E5%8F%AF%E5%8F%98%E6%95%B0%E6%8D%AE%E7%9A%84%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%8E%A2%E7%B4%A2" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;gitee.com&#x2F;monkey-HH&#x2F;picBed&#x2F;raw&#x2F;master&#x2F;picbed&#x2F;img&#x2F;202112281409527.png" title="ã€ReactåŸºç¡€ã€‘Reduxä»‹ç»ä»¥åŠç»“åˆä¸å¯å˜æ•°æ®çš„æ€§èƒ½ä¼˜åŒ–æ¢ç´¢">
  <span class="type">Previous Post</span>
  <span class="category"><i class="ic i-flag"></i> React</span>
  <h3>ã€ReactåŸºç¡€ã€‘Reduxä»‹ç»ä»¥åŠç»“åˆä¸å¯å˜æ•°æ®çš„æ€§èƒ½ä¼˜åŒ–æ¢ç´¢</h3>
  </a>

    </div>
    <div class="item right">
      

  <a href="/FrontEnd/React/FrontEnd/React/%E3%80%90React%E5%9F%BA%E7%A1%80%E3%80%91React%E7%BB%84%E4%BB%B6%E9%97%B4%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F%E6%80%BB%E7%BB%93" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;gitee.com&#x2F;monkey-HH&#x2F;picBed&#x2F;raw&#x2F;master&#x2F;picbed&#x2F;img&#x2F;202112281415928.png" title="ã€ReactåŸºç¡€ã€‘Reactç»„ä»¶é—´é€šä¿¡æ–¹å¼æ€»ç»“">
  <span class="type">Next Post</span>
  <span class="category"><i class="ic i-flag"></i> React</span>
  <h3>ã€ReactåŸºç¡€ã€‘Reactç»„ä»¶é—´é€šä¿¡æ–¹å¼æ€»ç»“</h3>
  </a>

    </div>
</div>

  
  <div class="wrap" id="comments"></div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="Contents">
          <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFReact-Hooks%EF%BC%9F"><span class="toc-number">1.</span> <span class="toc-text">ä»€ä¹ˆæ˜¯React Hooksï¼Ÿ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%9C%89React-Hooks%EF%BC%9F"><span class="toc-number">2.</span> <span class="toc-text">ä¸ºä»€ä¹ˆè¦æœ‰React Hooksï¼Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E7%94%A8%E4%B8%80%E4%B8%AA%E2%80%9C%E6%9C%89%E7%8A%B6%E6%80%81%E7%BB%84%E4%BB%B6%E2%80%9D%E5%9B%B0%E9%9A%BE"><span class="toc-number">2.1.</span> <span class="toc-text">å¤ç”¨ä¸€ä¸ªâ€œæœ‰çŠ¶æ€ç»„ä»¶â€å›°éš¾</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Mixin"><span class="toc-number">2.1.1.</span> <span class="toc-text">Mixin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HOC"><span class="toc-number">2.1.2.</span> <span class="toc-text">HOC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Render-Props"><span class="toc-number">2.1.3.</span> <span class="toc-text">Render Props</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E6%9D%82%E7%BB%84%E4%BB%B6%E5%8F%98%E5%BE%97%E9%9A%BE%E4%BB%A5%E7%90%86%E8%A7%A3"><span class="toc-number">2.2.</span> <span class="toc-text">å¤æ‚ç»„ä»¶å˜å¾—éš¾ä»¥ç†è§£</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9A%BE%E4%BB%A5%E7%90%86%E8%A7%A3%E7%9A%84class"><span class="toc-number">2.3.</span> <span class="toc-text">éš¾ä»¥ç†è§£çš„class</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Hooks%E4%BB%8B%E7%BB%8D%E5%8F%8A%E4%BD%BF%E7%94%A8"><span class="toc-number">3.</span> <span class="toc-text">Hooksä»‹ç»åŠä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#useState"><span class="toc-number">3.1.</span> <span class="toc-text">useState</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-number">3.1.1.</span> <span class="toc-text">åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95"><span class="toc-number">3.1.2.</span> <span class="toc-text">è¯­æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AF%8F%E4%B8%80%E6%AC%A1%E6%B8%B2%E6%9F%93%E7%9A%84%E6%97%B6%E5%80%99%E9%83%BD%E6%98%AF%E7%8B%AC%E7%AB%8B%E7%9A%84%E9%97%AD%E5%8C%85"><span class="toc-number">3.1.3.</span> <span class="toc-text">æ¯ä¸€æ¬¡æ¸²æŸ“çš„æ—¶å€™éƒ½æ˜¯ç‹¬ç«‹çš„é—­åŒ…</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#useRef"><span class="toc-number">3.2.</span> <span class="toc-text">useRef</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#useEffect%E5%92%8CuseLayoutEffect"><span class="toc-number">3.3.</span> <span class="toc-text">useEffectå’ŒuseLayoutEffect</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#useLayoutEffect"><span class="toc-number">3.3.1.</span> <span class="toc-text">useLayoutEffect</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AD%E5%8C%85%E9%99%B7%E9%98%B1"><span class="toc-number">3.3.2.</span> <span class="toc-text">é—­åŒ…é™·é˜±</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#useMemo-amp-amp-useCallback-%E5%AE%9E%E7%8E%B0%E7%A8%B3%E5%AE%9Aprops%E5%80%BC"><span class="toc-number">3.4.</span> <span class="toc-text">useMemo &amp;&amp; useCallback å®ç°ç¨³å®špropså€¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#useContext"><span class="toc-number">3.5.</span> <span class="toc-text">useContext</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#useReducer"><span class="toc-number">3.6.</span> <span class="toc-text">useReducer</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89Hooks"><span class="toc-number">4.</span> <span class="toc-text">è‡ªå®šä¹‰Hooks</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#useContext-useReducer%E6%A8%A1%E6%8B%9FRedux"><span class="toc-number">5.</span> <span class="toc-text">useContext + useReduceræ¨¡æ‹ŸRedux</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Hooks%E5%BA%93"><span class="toc-number">6.</span> <span class="toc-text">Hooksåº“</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ahooks"><span class="toc-number">6.1.</span> <span class="toc-text">ahooks</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">7.</span> <span class="toc-text">å‚è€ƒ</span></a></li></ol>
      </div>
      <div class="related panel pjax" data-title="Related">
        <ul>
          <li><a href="/FrontEnd/React/FrontEnd/React/%E3%80%90React%E5%9F%BA%E7%A1%80%E3%80%91React%E5%90%88%E6%88%90%E4%BA%8B%E4%BB%B6%E4%BB%8B%E7%BB%8D" rel="bookmark" title="ã€ReactåŸºç¡€ã€‘Reactåˆæˆäº‹ä»¶ä»‹ç»">ã€ReactåŸºç¡€ã€‘Reactåˆæˆäº‹ä»¶ä»‹ç»</a></li><li><a href="/FrontEnd/React/FrontEnd/React/%E3%80%90React%E5%9F%BA%E7%A1%80%E3%80%91Virtual%20DOM%E4%B8%8EDiff%E7%AE%97%E6%B3%95%E5%88%9D%E8%AF%86" rel="bookmark" title="ã€ReactåŸºç¡€ã€‘Virtual DOMä¸Diffç®—æ³•åˆè¯†">ã€ReactåŸºç¡€ã€‘Virtual DOMä¸Diffç®—æ³•åˆè¯†</a></li><li><a href="/FrontEnd/React/FrontEnd/React/%E3%80%90React%E5%9F%BA%E7%A1%80%E3%80%91React%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F" rel="bookmark" title="ã€ReactåŸºç¡€ã€‘Reactç”Ÿå‘½å‘¨æœŸ">ã€ReactåŸºç¡€ã€‘Reactç”Ÿå‘½å‘¨æœŸ</a></li><li><a href="/FrontEnd/React/FrontEnd/React/%E3%80%90React%E5%9F%BA%E7%A1%80%E3%80%91React%E7%BB%84%E4%BB%B6%E9%97%B4%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F%E6%80%BB%E7%BB%93" rel="bookmark" title="ã€ReactåŸºç¡€ã€‘Reactç»„ä»¶é—´é€šä¿¡æ–¹å¼æ€»ç»“">ã€ReactåŸºç¡€ã€‘Reactç»„ä»¶é—´é€šä¿¡æ–¹å¼æ€»ç»“</a></li><li class="active"><a href="/FrontEnd/React/FrontEnd/React/%E3%80%90React%E5%9F%BA%E7%A1%80%E3%80%91React%20Hooks%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8" rel="bookmark" title="ã€ReactåŸºç¡€ã€‘React Hooksä»‹ç»ä¸ä½¿ç”¨">ã€ReactåŸºç¡€ã€‘React Hooksä»‹ç»ä¸ä½¿ç”¨</a></li><li><a href="/FrontEnd/React/FrontEnd/React/%E3%80%90React%E5%9F%BA%E7%A1%80%E3%80%91Redux%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E7%BB%93%E5%90%88%E4%B8%8D%E5%8F%AF%E5%8F%98%E6%95%B0%E6%8D%AE%E7%9A%84%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%8E%A2%E7%B4%A2" rel="bookmark" title="ã€ReactåŸºç¡€ã€‘Reduxä»‹ç»ä»¥åŠç»“åˆä¸å¯å˜æ•°æ®çš„æ€§èƒ½ä¼˜åŒ–æ¢ç´¢">ã€ReactåŸºç¡€ã€‘Reduxä»‹ç»ä»¥åŠç»“åˆä¸å¯å˜æ•°æ®çš„æ€§èƒ½ä¼˜åŒ–æ¢ç´¢</a></li><li><a href="/FrontEnd/React/FrontEnd/React/%E3%80%90React%E5%9F%BA%E7%A1%80%E3%80%91%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81%E5%A4%8D%E7%94%A8%E5%8F%8A%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88" rel="bookmark" title="ã€ReactåŸºç¡€ã€‘å¸¸ç”¨ä»£ç å¤ç”¨åŠæ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ">ã€ReactåŸºç¡€ã€‘å¸¸ç”¨ä»£ç å¤ç”¨åŠæ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ</a></li>
        </ul>
      </div>
      <div class="overview panel" data-title="Overview">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="Monkey-HH"
      data-src="/images/avatar.jpg">
  <p class="name" itemprop="name">Monkey-HH</p>
  <div class="description" itemprop="description">Learn, share, make progress</div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="/archives/">
        <span class="count">54</span>
        <span class="name">posts</span>
      </a>
    </div>
    <div class="item categories">
      <a href="/categories/">
        <span class="count">18</span>
        <span class="name">categories</span>
      </a>
    </div>
    <div class="item tags">
      <a href="/tags/">
        <span class="count">23</span>
        <span class="name">tags</span>
      </a>
    </div>
</nav>

<div class="social">
      <span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL21vbmtleS1ISA==" title="https:&#x2F;&#x2F;github.com&#x2F;monkey-HH"><i class="ic i-github"></i></span>
      <span class="exturl item email" data-url="bWFpbHRvOmhoanNjYXVAMTYzLmNvbQ==" title="mailto:hhjscau@163.com"><i class="ic i-envelope"></i></span>
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="/" rel="section"><i class="ic i-home"></i>Home</a>
  </li>

        
  <li class="item dropdown">
      <a href="javascript:void(0);"><i class="ic i-feather"></i>Posts</a>
    <ul class="submenu">

        
  <li class="item">
    <a href="/categories/" rel="section"><i class="ic i-th"></i>Categories</a>
  </li>

        
  <li class="item">
    <a href="/tags/" rel="section"><i class="ic i-tags"></i>Tags</a>
  </li>

  </ul>
    
  <li class="item">
    <a href="/friends/" rel="section"><i class="ic i-heart"></i>Friends</a>
  </li>

    
  <li class="item">
    <a href="/about/" rel="section"><i class="ic i-user"></i>About</a>
  </li>

    
  <li class="item">
    <a href="/links/" rel="section"><i class="ic i-magic"></i>Links</a>
  </li>


</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
        <a href="/FrontEnd/React/FrontEnd/React/%E3%80%90React%E5%9F%BA%E7%A1%80%E3%80%91Redux%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E7%BB%93%E5%90%88%E4%B8%8D%E5%8F%AF%E5%8F%98%E6%95%B0%E6%8D%AE%E7%9A%84%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%8E%A2%E7%B4%A2" rel="prev" title="Previous Post"><i class="ic i-chevron-left"></i></a>
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
        <a href="/FrontEnd/React/FrontEnd/React/%E3%80%90React%E5%9F%BA%E7%A1%80%E3%80%91React%E7%BB%84%E4%BB%B6%E9%97%B4%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F%E6%80%BB%E7%BB%93" rel="next" title="Next Post"><i class="ic i-chevron-right"></i></a>
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          
<div class="rpost pjax">
  <h2>Random Posts</h2>
  <ul>
      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/FrontEnd/" title="In FrontEnd">FrontEnd</a>
<i class="ic i-angle-right"></i>
<a href="/categories/FrontEnd/CSS/" title="In CSS">CSS</a>
</div>

    <span><a href="/FrontEnd/CSS/FrontEnd/CSS/CSS3%E5%8A%A8%E7%94%BB%E5%85%A5%E9%97%A8" title="CSS3åŠ¨ç”»å…¥é—¨">CSS3åŠ¨ç”»å…¥é—¨</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/FrontEnd/" title="In FrontEnd">FrontEnd</a>
<i class="ic i-angle-right"></i>
<a href="/categories/FrontEnd/JavaScript/" title="In JavaScript">JavaScript</a>
</div>

    <span><a href="/FrontEnd/JavaScript/FrontEnd/JavaScript/JavaScript%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87" title="JavaScriptæ‰§è¡Œä¸Šä¸‹æ–‡">JavaScriptæ‰§è¡Œä¸Šä¸‹æ–‡</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/FrontEnd/" title="In FrontEnd">FrontEnd</a>
<i class="ic i-angle-right"></i>
<a href="/categories/FrontEnd/Browser/" title="In Browser">Browser</a>
</div>

    <span><a href="/FrontEnd/Browser/FrontEnd/Browser/%E3%80%90V8%E5%BC%95%E6%93%8E%E5%8E%9F%E7%90%86%E7%AF%87%E3%80%91%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E6%9C%BA%E5%88%B6" title="ã€V8å¼•æ“åŸç†ç¯‡ã€‘äº‹ä»¶å¾ªç¯æœºåˆ¶">ã€V8å¼•æ“åŸç†ç¯‡ã€‘äº‹ä»¶å¾ªç¯æœºåˆ¶</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/FrontEnd/" title="In FrontEnd">FrontEnd</a>
<i class="ic i-angle-right"></i>
<a href="/categories/FrontEnd/Browser/" title="In Browser">Browser</a>
</div>

    <span><a href="/FrontEnd/Browser/FrontEnd/Browser/%E3%80%90V8%E5%BC%95%E6%93%8E%E5%8E%9F%E7%90%86%E7%AF%87%E3%80%91%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E7%9A%84JavaScript%E6%89%A7%E8%A1%8C%E6%9C%BA%E5%88%B6%EF%BC%9A%E6%8F%90%E5%8D%87%E6%9C%BA%E5%88%B6%E3%80%81%E8%B0%83%E7%94%A8%E6%A0%88%E3%80%81%E4%BD%9C%E7%94%A8%E5%9F%9F%E3%80%81%E9%97%AD%E5%8C%85%E3%80%81%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E3%80%81this" title="ã€V8å¼•æ“åŸç†ç¯‡ã€‘æµè§ˆå™¨ä¸­çš„JavaScriptæ‰§è¡Œæœºåˆ¶ï¼šæå‡æœºåˆ¶ã€è°ƒç”¨æ ˆã€ä½œç”¨åŸŸã€é—­åŒ…ã€æ‰§è¡Œä¸Šä¸‹æ–‡ã€this">ã€V8å¼•æ“åŸç†ç¯‡ã€‘æµè§ˆå™¨ä¸­çš„JavaScriptæ‰§è¡Œæœºåˆ¶ï¼šæå‡æœºåˆ¶ã€è°ƒç”¨æ ˆã€ä½œç”¨åŸŸã€é—­åŒ…ã€æ‰§è¡Œä¸Šä¸‹æ–‡ã€this</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/FrontEnd/" title="In FrontEnd">FrontEnd</a>
<i class="ic i-angle-right"></i>
<a href="/categories/FrontEnd/JavaScript/" title="In JavaScript">JavaScript</a>
</div>

    <span><a href="/FrontEnd/JavaScript/FrontEnd/JavaScript/JavaScript%E4%BD%9C%E7%94%A8%E5%9F%9F%E4%B8%8E%E9%97%AD%E5%8C%85" title="JavaScriptä½œç”¨åŸŸä¸é—­åŒ…">JavaScriptä½œç”¨åŸŸä¸é—­åŒ…</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/FrontEnd/" title="In FrontEnd">FrontEnd</a>
<i class="ic i-angle-right"></i>
<a href="/categories/FrontEnd/Browser/" title="In Browser">Browser</a>
</div>

    <span><a href="/FrontEnd/Browser/FrontEnd/Browser/%E3%80%90V8%E5%BC%95%E6%93%8E%E5%8E%9F%E7%90%86%E7%AF%87%E3%80%91JavaScript%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E6%9C%BA%E5%88%B6" title="ã€V8å¼•æ“åŸç†ç¯‡ã€‘JavaScriptäº‹ä»¶å¾ªç¯æœºåˆ¶">ã€V8å¼•æ“åŸç†ç¯‡ã€‘JavaScriptäº‹ä»¶å¾ªç¯æœºåˆ¶</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/FrontEnd/" title="In FrontEnd">FrontEnd</a>
<i class="ic i-angle-right"></i>
<a href="/categories/FrontEnd/JavaScript/" title="In JavaScript">JavaScript</a>
</div>

    <span><a href="/FrontEnd/JavaScript/FrontEnd/JavaScript/JavaScript%E5%B8%B8%E7%94%A8%E7%BB%A7%E6%89%BF%E6%96%B9%E6%A1%88" title="JavaScriptå¸¸ç”¨ç»§æ‰¿æ–¹æ¡ˆ">JavaScriptå¸¸ç”¨ç»§æ‰¿æ–¹æ¡ˆ</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/FrontEnd/" title="In FrontEnd">FrontEnd</a>
<i class="ic i-angle-right"></i>
<a href="/categories/FrontEnd/Module-Bundler/" title="In Module_Bundler">Module_Bundler</a>
</div>

    <span><a href="/FrontEnd/Module-Bundler/FrontEnd/Module_Bundler/Vite%E4%B8%BA%E4%BB%80%E4%B9%88%E6%AF%94webpack%E5%BF%AB" title="Viteä¸ºä»€ä¹ˆæ¯”webpackå¿«">Viteä¸ºä»€ä¹ˆæ¯”webpackå¿«</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/FrontEnd/" title="In FrontEnd">FrontEnd</a>
<i class="ic i-angle-right"></i>
<a href="/categories/FrontEnd/React/" title="In React">React</a>
</div>

    <span><a href="/FrontEnd/React/FrontEnd/React/%E3%80%90React%E5%9F%BA%E7%A1%80%E3%80%91Redux%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E7%BB%93%E5%90%88%E4%B8%8D%E5%8F%AF%E5%8F%98%E6%95%B0%E6%8D%AE%E7%9A%84%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%8E%A2%E7%B4%A2" title="ã€ReactåŸºç¡€ã€‘Reduxä»‹ç»ä»¥åŠç»“åˆä¸å¯å˜æ•°æ®çš„æ€§èƒ½ä¼˜åŒ–æ¢ç´¢">ã€ReactåŸºç¡€ã€‘Reduxä»‹ç»ä»¥åŠç»“åˆä¸å¯å˜æ•°æ®çš„æ€§èƒ½ä¼˜åŒ–æ¢ç´¢</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/FrontEnd/" title="In FrontEnd">FrontEnd</a>
<i class="ic i-angle-right"></i>
<a href="/categories/FrontEnd/Browser/" title="In Browser">Browser</a>
</div>

    <span><a href="/FrontEnd/Browser/FrontEnd/Browser/%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5%E4%BB%A5%E5%8F%8A%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98" title="åŒæºç­–ç•¥ä»¥åŠå¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜">åŒæºç­–ç•¥ä»¥åŠå¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜</a></span>
  </li>

  </ul>
</div>
<div>
  <h2>Recent Comments</h2>
  <ul class="leancloud-recent-comment"></ul>
</div>

        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 2021 â€“ 
    <span itemprop="copyrightYear">2022</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Monkey-HH @ Monkey's Blog</span>
  </div>
  <div class="count">
    <span class="post-meta-item-icon">
      <i class="ic i-chart-area"></i>
    </span>
    <span title="Symbols count total">773k words</span>

    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="ic i-coffee"></i>
    </span>
    <span title="Reading time total">11:43</span>
  </div>
  <div class="powered-by">
    Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span>
  </div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: 'FrontEnd/React/FrontEnd/React/ã€ReactåŸºç¡€ã€‘React Hooksä»‹ç»ä¸ä½¿ç”¨',
    favicon: {
      show: "ï¼ˆâ—Â´3ï½€â—ï¼‰Goooood",
      hide: "(Â´Ğ”ï½€)Booooom"
    },
    search : {
      placeholder: "Search for Posts",
      empty: "We didn't find any results for the search: ${query}",
      stats: "${hits} results found in ${time} ms"
    },
    valine: true,fancybox: true,copyright: 'Copied to clipboard successfully! <br> All articles in this blog are licensed under <i class="ic i-creative-commons"></i>BY-NC-SA.',
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };
</script>

<script src="https://cdn.polyfill.io/v2/polyfill.js"></script>

<script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script>

<script src="/js/app.js?v=0.2.5"></script>




</body>
</html>
